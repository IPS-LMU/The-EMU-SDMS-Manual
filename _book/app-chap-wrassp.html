<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>19 wrassp | The EMU-SDMS Manual</title>
  <meta name="description" content="19 wrassp | The EMU-SDMS Manual" />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="19 wrassp | The EMU-SDMS Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ips-lmu.github.io/The-EMU-SDMS-Manual/" />
  <meta property="og:image" content="https://ips-lmu.github.io/The-EMU-SDMS-Manual/pics/EMU-webAppIcon-roundCorners.png" />
  <meta property="og:description" content="19 wrassp | The EMU-SDMS Manual" />
  <meta name="github-repo" content="IPS-LMU/The-EMU-SDMS-Manual" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="19 wrassp | The EMU-SDMS Manual" />
  
  <meta name="twitter:description" content="19 wrassp | The EMU-SDMS Manual" />
  <meta name="twitter:image" content="https://ips-lmu.github.io/The-EMU-SDMS-Manual/pics/EMU-webAppIcon-roundCorners.png" />

<meta name="author" content="Raphael Winkelmann" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="app-chap-eql.html"/>
<link rel="next" href="about.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The EMU-SDMS Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="installing-the-emu-sdms.html"><a href="installing-the-emu-sdms.html"><i class="fa fa-check"></i><b>1</b> Installing the EMU-SDMS</a><ul>
<li class="chapter" data-level="1.1" data-path="installing-the-emu-sdms.html"><a href="installing-the-emu-sdms.html#version-disclaimer"><i class="fa fa-check"></i><b>1.1</b> Version disclaimer</a></li>
<li class="chapter" data-level="1.2" data-path="installing-the-emu-sdms.html"><a href="installing-the-emu-sdms.html#for-developers-and-people-interested-in-the-source-code"><i class="fa fa-check"></i><b>1.2</b> For developers and people interested in the source code</a></li>
</ul></li>
<li class="part"><span><b>I Overview and tutorial</b></span></li>
<li class="chapter" data-level="2" data-path="chap-overview.html"><a href="chap-overview.html"><i class="fa fa-check"></i><b>2</b> An overview of the EMU-SDMS</a><ul>
<li class="chapter" data-level="2.1" data-path="chap-overview.html"><a href="chap-overview.html#the-evolution-of-the-emu-sdms"><i class="fa fa-check"></i><b>2.1</b> The evolution of the EMU-SDMS</a></li>
<li class="chapter" data-level="2.2" data-path="chap-overview.html"><a href="chap-overview.html#sec:overview-sysArch"><i class="fa fa-check"></i><b>2.2</b> EMU-SDMS: System architecture and default workflow</a></li>
<li class="chapter" data-level="2.3" data-path="chap-overview.html"><a href="chap-overview.html#emu-sdms-is-it-something-for-you"><i class="fa fa-check"></i><b>2.3</b> EMU-SDMS: Is it something for you?</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chap-tutorial.html"><a href="chap-tutorial.html"><i class="fa fa-check"></i><b>3</b> A tutorial on how to use the EMU-SDMS</a><ul>
<li class="chapter" data-level="3.1" data-path="chap-tutorial.html"><a href="chap-tutorial.html#converting-the-textgrid-collection"><i class="fa fa-check"></i><b>3.1</b> Converting the TextGrid collection</a></li>
<li class="chapter" data-level="3.2" data-path="chap-tutorial.html"><a href="chap-tutorial.html#loading-and-inspecting-the-database"><i class="fa fa-check"></i><b>3.2</b> Loading and inspecting the database</a><ul>
<li class="chapter" data-level="3.2.1" data-path="chap-tutorial.html"><a href="chap-tutorial.html#overview"><i class="fa fa-check"></i><b>3.2.1</b> Overview</a></li>
<li class="chapter" data-level="3.2.2" data-path="chap-tutorial.html"><a href="chap-tutorial.html#database-annotation-and-visual-inspection"><i class="fa fa-check"></i><b>3.2.2</b> Database annotation and visual inspection</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="chap-tutorial.html"><a href="chap-tutorial.html#querying-and-autobuilding-the-annotation-structure"><i class="fa fa-check"></i><b>3.3</b> Querying and autobuilding the annotation structure</a></li>
<li class="chapter" data-level="3.4" data-path="chap-tutorial.html"><a href="chap-tutorial.html#autobuilding"><i class="fa fa-check"></i><b>3.4</b> Autobuilding</a><ul>
<li class="chapter" data-level="3.4.1" data-path="chap-tutorial.html"><a href="chap-tutorial.html#querying-the-hierarchical-annotations"><i class="fa fa-check"></i><b>3.4.1</b> Querying the hierarchical annotations</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="chap-tutorial.html"><a href="chap-tutorial.html#section:tutorial-sigExtrAndExpl"><i class="fa fa-check"></i><b>3.5</b> Signal extraction and exploration</a></li>
<li class="chapter" data-level="3.6" data-path="chap-tutorial.html"><a href="chap-tutorial.html#vowel-height-as-a-function-of-word-types-content-vs.-function-evaluation-and-statistical-analysis"><i class="fa fa-check"></i><b>3.6</b> Vowel height as a function of word types (content vs. function): evaluation and statistical analysis</a></li>
<li class="chapter" data-level="3.7" data-path="chap-tutorial.html"><a href="chap-tutorial.html#conclusion"><i class="fa fa-check"></i><b>3.7</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>II Main components and concepts</b></span></li>
<li class="chapter" data-level="4" data-path="chap-annot-struct-mod.html"><a href="chap-annot-struct-mod.html"><i class="fa fa-check"></i><b>4</b> Annotation Structure Modeling</a><ul>
<li class="chapter" data-level="4.1" data-path="chap-annot-struct-mod.html"><a href="chap-annot-struct-mod.html#per-database-annotation-structure-definition"><i class="fa fa-check"></i><b>4.1</b> Per database annotation structure definition</a></li>
<li class="chapter" data-level="4.2" data-path="chap-annot-struct-mod.html"><a href="chap-annot-struct-mod.html#parallel-labels-and-multiple-attributes"><i class="fa fa-check"></i><b>4.2</b> Parallel labels and multiple attributes</a></li>
<li class="chapter" data-level="4.3" data-path="chap-annot-struct-mod.html"><a href="chap-annot-struct-mod.html#metadata-strategy-using-single-bundle-root-nodes"><i class="fa fa-check"></i><b>4.3</b> Metadata strategy using single bundle root nodes</a></li>
<li class="chapter" data-level="4.4" data-path="chap-annot-struct-mod.html"><a href="chap-annot-struct-mod.html#conclusion-1"><i class="fa fa-check"></i><b>4.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chap-emuDB.html"><a href="chap-emuDB.html"><i class="fa fa-check"></i><b>5</b> The <code>emuDB</code> Format</a><ul>
<li class="chapter" data-level="5.1" data-path="chap-emuDB.html"><a href="chap-emuDB.html#database-design"><i class="fa fa-check"></i><b>5.1</b> Database design</a></li>
<li class="chapter" data-level="5.2" data-path="chap-emuDB.html"><a href="chap-emuDB.html#creating-an-emudb"><i class="fa fa-check"></i><b>5.2</b> Creating an <code>emuDB</code></a><ul>
<li class="chapter" data-level="5.2.1" data-path="chap-emuDB.html"><a href="chap-emuDB.html#creating-an-emudb-from-scratch"><i class="fa fa-check"></i><b>5.2.1</b> Creating an <code>emuDB</code> from scratch</a></li>
<li class="chapter" data-level="5.2.2" data-path="chap-emuDB.html"><a href="chap-emuDB.html#loading-and-editing-an-empty-database"><i class="fa fa-check"></i><b>5.2.2</b> Loading and editing an empty database</a></li>
<li class="chapter" data-level="5.2.3" data-path="chap-emuDB.html"><a href="chap-emuDB.html#level-definitions"><i class="fa fa-check"></i><b>5.2.3</b> Level definitions</a></li>
<li class="chapter" data-level="5.2.4" data-path="chap-emuDB.html"><a href="chap-emuDB.html#link-definitions"><i class="fa fa-check"></i><b>5.2.4</b> Link definitions</a></li>
<li class="chapter" data-level="5.2.5" data-path="chap-emuDB.html"><a href="chap-emuDB.html#file-handling"><i class="fa fa-check"></i><b>5.2.5</b> File handling</a></li>
<li class="chapter" data-level="5.2.6" data-path="chap-emuDB.html"><a href="chap-emuDB.html#ssff-track-definitions"><i class="fa fa-check"></i><b>5.2.6</b> SSFF track definitions</a></li>
<li class="chapter" data-level="5.2.7" data-path="chap-emuDB.html"><a href="chap-emuDB.html#configuring-the-emu-webapp-and-annotating-the-emudb"><i class="fa fa-check"></i><b>5.2.7</b> Configuring the <code>EMU-webApp</code> and annotating the <code>emuDB</code></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="chap-emuDB.html"><a href="chap-emuDB.html#conclusion-2"><i class="fa fa-check"></i><b>5.3</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chap-querysys.html"><a href="chap-querysys.html"><i class="fa fa-check"></i><b>6</b> The query system</a><ul>
<li class="chapter" data-level="6.1" data-path="chap-querysys.html"><a href="chap-querysys.html#sec:query-emuRsegs"><i class="fa fa-check"></i><b>6.1</b> <code>emuRsegs</code>: The resulting object of a query</a></li>
<li class="chapter" data-level="6.2" data-path="chap-querysys.html"><a href="chap-querysys.html#eql-the-emu-query-language-version-2"><i class="fa fa-check"></i><b>6.2</b> <code>EQL</code>: The EMU Query Language version 2</a><ul>
<li class="chapter" data-level="6.2.1" data-path="chap-querysys.html"><a href="chap-querysys.html#simple-queries"><i class="fa fa-check"></i><b>6.2.1</b> Simple queries</a></li>
<li class="chapter" data-level="6.2.2" data-path="chap-querysys.html"><a href="chap-querysys.html#combining-simple-queries"><i class="fa fa-check"></i><b>6.2.2</b> Combining simple queries</a></li>
<li class="chapter" data-level="6.2.3" data-path="chap-querysys.html"><a href="chap-querysys.html#subsec:query_positionQueries"><i class="fa fa-check"></i><b>6.2.3</b> Position queries</a></li>
<li class="chapter" data-level="6.2.4" data-path="chap-querysys.html"><a href="chap-querysys.html#subsec:query_countQueries"><i class="fa fa-check"></i><b>6.2.4</b> Count queries</a></li>
<li class="chapter" data-level="6.2.5" data-path="chap-querysys.html"><a href="chap-querysys.html#subsec:query_moreComplexQueries"><i class="fa fa-check"></i><b>6.2.5</b> More complex queries</a></li>
<li class="chapter" data-level="6.2.6" data-path="chap-querysys.html"><a href="chap-querysys.html#subsec:query_deducingTime"><i class="fa fa-check"></i><b>6.2.6</b> Deducing time</a></li>
<li class="chapter" data-level="6.2.7" data-path="chap-querysys.html"><a href="chap-querysys.html#subsec:requery"><i class="fa fa-check"></i><b>6.2.7</b> Requery</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="chap-querysys.html"><a href="chap-querysys.html#discussion"><i class="fa fa-check"></i><b>6.3</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chap-sigDataExtr.html"><a href="chap-sigDataExtr.html"><i class="fa fa-check"></i><b>7</b> Signal data extraction</a><ul>
<li class="chapter" data-level="7.1" data-path="chap-sigDataExtr.html"><a href="chap-sigDataExtr.html#extracting-pre-defined-tracks"><i class="fa fa-check"></i><b>7.1</b> Extracting pre-defined tracks</a></li>
<li class="chapter" data-level="7.2" data-path="chap-sigDataExtr.html"><a href="chap-sigDataExtr.html#adding-new-tracks"><i class="fa fa-check"></i><b>7.2</b> Adding new tracks</a></li>
<li class="chapter" data-level="7.3" data-path="chap-sigDataExtr.html"><a href="chap-sigDataExtr.html#calculating-tracks-on-the-fly"><i class="fa fa-check"></i><b>7.3</b> Calculating tracks on-the-fly</a></li>
<li class="chapter" data-level="7.4" data-path="chap-sigDataExtr.html"><a href="chap-sigDataExtr.html#the-resulting-object-tibble"><i class="fa fa-check"></i><b>7.4</b> The resulting object: <code>tibble</code></a></li>
<li class="chapter" data-level="7.5" data-path="chap-sigDataExtr.html"><a href="chap-sigDataExtr.html#conclusion-3"><i class="fa fa-check"></i><b>7.5</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chap-wrassp.html"><a href="chap-wrassp.html"><i class="fa fa-check"></i><b>8</b> The R package <code>wrassp</code></a><ul>
<li class="chapter" data-level="8.1" data-path="chap-wrassp.html"><a href="chap-wrassp.html#introduction"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="chap-wrassp.html"><a href="chap-wrassp.html#file-i0-and-the-asspdataobj"><i class="fa fa-check"></i><b>8.2</b> File I/0 and the <code>AsspDataObj</code></a></li>
<li class="chapter" data-level="8.3" data-path="chap-wrassp.html"><a href="chap-wrassp.html#signal-processing"><i class="fa fa-check"></i><b>8.3</b> Signal processing</a></li>
<li class="chapter" data-level="8.4" data-path="chap-wrassp.html"><a href="chap-wrassp.html#subsec:wrassp-wrasspOutputInfos"><i class="fa fa-check"></i><b>8.4</b> The <code>wrasspOutputInfos</code> object</a></li>
<li class="chapter" data-level="8.5" data-path="chap-wrassp.html"><a href="chap-wrassp.html#subsec:wrassp-formants"><i class="fa fa-check"></i><b>8.5</b> Formants and their bandwidths</a><ul>
<li class="chapter" data-level="8.5.1" data-path="chap-wrassp.html"><a href="chap-wrassp.html#subsec:wrassp_f0"><i class="fa fa-check"></i><b>8.5.1</b> Fundamental frequency contour</a></li>
<li class="chapter" data-level="8.5.2" data-path="chap-wrassp.html"><a href="chap-wrassp.html#subsec:wrassp-RMS"><i class="fa fa-check"></i><b>8.5.2</b> RMS energy contour</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="chap-wrassp.html"><a href="chap-wrassp.html#sec:wrassp_logging"><i class="fa fa-check"></i><b>8.6</b> Logging <code>wrassp</code>’s function calls</a></li>
<li class="chapter" data-level="8.7" data-path="chap-wrassp.html"><a href="chap-wrassp.html#sec:wrassp-emu-sdms"><i class="fa fa-check"></i><b>8.7</b> Using <code>wrassp</code> in the EMU-SDMS</a></li>
<li class="chapter" data-level="8.8" data-path="chap-wrassp.html"><a href="chap-wrassp.html#sec:wrassp_genSSFF"><i class="fa fa-check"></i><b>8.8</b> Storing data in the SSFF file format</a></li>
<li class="chapter" data-level="8.9" data-path="chap-wrassp.html"><a href="chap-wrassp.html#conclusion-4"><i class="fa fa-check"></i><b>8.9</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html"><i class="fa fa-check"></i><b>9</b> The <code>EMU-webApp</code></a><ul>
<li class="chapter" data-level="9.1" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#sec:emu-webApp-mainLayout"><i class="fa fa-check"></i><b>9.1</b> Main layout</a></li>
<li class="chapter" data-level="9.2" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#sec:webApp-generalUsage"><i class="fa fa-check"></i><b>9.2</b> General usage</a><ul>
<li class="chapter" data-level="9.2.1" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#annotating-levels-containing-time-information"><i class="fa fa-check"></i><b>9.2.1</b> Annotating levels containing time information</a></li>
<li class="chapter" data-level="9.2.2" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#working-with-hierarchical-annotations-2-chapemu-webapp"><i class="fa fa-check"></i><b>9.2.2</b> Working with hierarchical annotations</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#configuring-the-emu-webapp"><i class="fa fa-check"></i><b>9.3</b> Configuring the <code>EMU-webApp</code></a><ul>
<li class="chapter" data-level="9.3.1" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#subsec:emu-webAppConfigWithEmuR"><i class="fa fa-check"></i><b>9.3.1</b> Basic configurations using <code>emuR</code></a></li>
<li class="chapter" data-level="9.3.2" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#signal-canvas-and-level-canvas-order"><i class="fa fa-check"></i><b>9.3.2</b> Signal canvas and level canvas order</a></li>
<li class="chapter" data-level="9.3.3" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#subsec:emu-webAppAdvancedConfig"><i class="fa fa-check"></i><b>9.3.3</b> Advanced configurations made by editing the <code>_DBconfig.json</code></a></li>
<li class="chapter" data-level="9.3.4" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#d-canvas"><i class="fa fa-check"></i><b>9.3.4</b> 2D canvas</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#conclusion-5"><i class="fa fa-check"></i><b>9.4</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>III Main <code>emuR</code> function and object index</b></span></li>
<li class="chapter" data-level="10" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html"><i class="fa fa-check"></i><b>10</b> <code>emuR</code> - package functions</a><ul>
<li class="chapter" data-level="10.1" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#sec:emuRpackageDetails-importRoutines"><i class="fa fa-check"></i><b>10.1</b> Import and conversion routines</a><ul>
<li class="chapter" data-level="10.1.1" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#legacy-emu-databases"><i class="fa fa-check"></i><b>10.1.1</b> Legacy EMU databases</a></li>
<li class="chapter" data-level="10.1.2" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#textgrid-collections"><i class="fa fa-check"></i><b>10.1.2</b> TextGrid collections</a></li>
<li class="chapter" data-level="10.1.3" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#bpf-collections"><i class="fa fa-check"></i><b>10.1.3</b> BPF collections</a></li>
<li class="chapter" data-level="10.1.4" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#txt-collections"><i class="fa fa-check"></i><b>10.1.4</b> txt collections</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#sec:emuRpackageDetails-emuDBinteract"><i class="fa fa-check"></i><b>10.2</b> <code>emuDB</code> interaction and configuration routines</a></li>
<li class="chapter" data-level="10.3" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#sec:emuRpackageDetails-emuWebAppConfig"><i class="fa fa-check"></i><b>10.3</b> <code>EMU-webApp</code> configuration routines</a></li>
<li class="chapter" data-level="10.4" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#sec:emuRpackageDetails-dataExtr"><i class="fa fa-check"></i><b>10.4</b> Data extraction routines</a></li>
<li class="chapter" data-level="10.5" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#sec:emuRpackageDetails-centralObjects"><i class="fa fa-check"></i><b>10.5</b> Central objects</a></li>
<li class="chapter" data-level="10.6" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#sec:emuRpackageDetails-exportRoutines"><i class="fa fa-check"></i><b>10.6</b> Export routines</a></li>
<li class="chapter" data-level="10.7" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#conclusion-6"><i class="fa fa-check"></i><b>10.7</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>IV Implementation</b></span></li>
<li class="chapter" data-level="11" data-path="chap-querysys-impl.html"><a href="chap-querysys-impl.html"><i class="fa fa-check"></i><b>11</b> Implementation of the query system</a><ul>
<li class="chapter" data-level="11.1" data-path="chap-querysys-impl.html"><a href="chap-querysys-impl.html#sec:query-queryExpressionParser"><i class="fa fa-check"></i><b>11.1</b> Query expression parser</a></li>
<li class="chapter" data-level="11.2" data-path="chap-querysys-impl.html"><a href="chap-querysys-impl.html#subsec:query-redundantLinks"><i class="fa fa-check"></i><b>11.2</b> Redundant links</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="chap-wrassp-impl.html"><a href="chap-wrassp-impl.html"><i class="fa fa-check"></i><b>12</b> <code>wrassp</code> implementation</a><ul>
<li class="chapter" data-level="12.1" data-path="chap-wrassp-impl.html"><a href="chap-wrassp-impl.html#the-libassp-port"><i class="fa fa-check"></i><b>12.1</b> The <code>libassp</code> port</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="chap-emu-webAppImplementation.html"><a href="chap-emu-webAppImplementation.html"><i class="fa fa-check"></i><b>13</b> <code>EMU-webApp</code> implementation</a><ul>
<li class="chapter" data-level="13.1" data-path="chap-emu-webAppImplementation.html"><a href="chap-emu-webAppImplementation.html#subsec:emu-webAppTheProtocol"><i class="fa fa-check"></i><b>13.1</b> Communication protocol</a></li>
<li class="chapter" data-level="13.2" data-path="chap-emu-webAppImplementation.html"><a href="chap-emu-webAppImplementation.html#url-parameters"><i class="fa fa-check"></i><b>13.2</b> URL parameters</a><ul>
<li class="chapter" data-level="13.2.1" data-path="chap-emu-webAppImplementation.html"><a href="chap-emu-webAppImplementation.html#websocket-server-parameters"><i class="fa fa-check"></i><b>13.2.1</b> Websocket server parameters</a></li>
<li class="chapter" data-level="13.2.2" data-path="chap-emu-webAppImplementation.html"><a href="chap-emu-webAppImplementation.html#examples"><i class="fa fa-check"></i><b>13.2.2</b> Examples</a></li>
<li class="chapter" data-level="13.2.3" data-path="chap-emu-webAppImplementation.html"><a href="chap-emu-webAppImplementation.html#label-file-preview-parameters"><i class="fa fa-check"></i><b>13.2.3</b> Label file preview parameters</a></li>
<li class="chapter" data-level="13.2.4" data-path="chap-emu-webAppImplementation.html"><a href="chap-emu-webAppImplementation.html#examples-1"><i class="fa fa-check"></i><b>13.2.4</b> Examples</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Appendices</b></span></li>
<li class="chapter" data-level="14" data-path="app-chap-useCases.html"><a href="app-chap-useCases.html"><i class="fa fa-check"></i><b>14</b> Use cases</a><ul>
<li class="chapter" data-level="14.1" data-path="app-chap-useCases.html"><a href="app-chap-useCases.html#sec:app-chap-useCases-q1"><i class="fa fa-check"></i><b>14.1</b> What is the average length of all <em>n</em> phonetic segments in the <em>ae</em> <code>emuDB</code>?</a></li>
<li class="chapter" data-level="14.2" data-path="app-chap-useCases.html"><a href="app-chap-useCases.html#sec:app-chap-useCases-q2"><i class="fa fa-check"></i><b>14.2</b> What does the F1 and F2 distribution of all phonetic segments that contain the labels <em>I</em>, <em>o:</em>, <em>u:</em>, <em>V</em> or <em>@</em> look like?</a></li>
<li class="chapter" data-level="14.3" data-path="app-chap-useCases.html"><a href="app-chap-useCases.html#sec:app-chap-useCases-q3"><i class="fa fa-check"></i><b>14.3</b> What words do the phonetic segments that carry the labels <em>s</em>, <em>z</em>, <em>S</em> or <em>Z</em> in the <em>ae</em> <code>emuDB</code> occur in and what is their phonetic context?</a></li>
<li class="chapter" data-level="14.4" data-path="app-chap-useCases.html"><a href="app-chap-useCases.html#sec:app-chap-useCases-q4"><i class="fa fa-check"></i><b>14.4</b> Do the phonetic segments labeled <em>s</em>, <em>z</em>, <em>S</em> or <em>Z</em> in the <em>ae</em> <code>emuDB</code> differ with respect to their first spectral moment?\footnote{The original version of this use case was written by Florian Schiel as part of the <code>emuR_intro</code> vignette that is part of the <code>emuR</code> package.</a><ul>
<li class="chapter" data-level="14.4.1" data-path="app-chap-useCases.html"><a href="app-chap-useCases.html#note-see-refrecipespectralanalysis-for-more-up-to-date-methods-of-performing-spectral-analysis"><i class="fa fa-check"></i><b>14.4.1</b> NOTE: See @ref(recipe:spectralAnalysis) for more up to date methods of performing spectral analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="app-chap-fileFormats.html"><a href="app-chap-fileFormats.html"><i class="fa fa-check"></i><b>15</b> File Formats</a><ul>
<li class="chapter" data-level="15.1" data-path="app-chap-fileFormats.html"><a href="app-chap-fileFormats.html#file-descriptions"><i class="fa fa-check"></i><b>15.1</b> File descriptions</a><ul>
<li class="chapter" data-level="15.1.1" data-path="app-chap-fileFormats.html"><a href="app-chap-fileFormats.html#subsec:app-chapFileFormatsDBconfig"><i class="fa fa-check"></i><b>15.1.1</b> <code>_DBconfig.json</code></a></li>
<li class="chapter" data-level="15.1.2" data-path="app-chap-fileFormats.html"><a href="app-chap-fileFormats.html#subsec:app-chapFileFormatsAnnotJSON"><i class="fa fa-check"></i><b>15.1.2</b> <code>_annot.json</code></a></li>
<li class="chapter" data-level="15.1.3" data-path="app-chap-fileFormats.html"><a href="app-chap-fileFormats.html#subsec:app-chapFileFormatsSSFF"><i class="fa fa-check"></i><b>15.1.3</b> The SSFF file format</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="app-chap-fileFormats.html"><a href="app-chap-fileFormats.html#example-files"><i class="fa fa-check"></i><b>15.2</b> Example files</a><ul>
<li class="chapter" data-level="15.2.1" data-path="app-chap-fileFormats.html"><a href="app-chap-fileFormats.html#subsec:app-chapExampleFilesBundleList"><i class="fa fa-check"></i><b>15.2.1</b> <code>_bundleList.json</code></a></li>
<li class="chapter" data-level="15.2.2" data-path="app-chap-fileFormats.html"><a href="app-chap-fileFormats.html#subsec:app-chapExampleFilesBndlJSON"><i class="fa fa-check"></i><b>15.2.2</b> <code>_bndl.json</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="app-chap-wsProtocol.html"><a href="app-chap-wsProtocol.html"><i class="fa fa-check"></i><b>16</b> The <code>EMU-webApp-websocket-protocol</code> Version 2.0</a><ul>
<li class="chapter" data-level="16.1" data-path="app-chap-wsProtocol.html"><a href="app-chap-wsProtocol.html#protocol-overview"><i class="fa fa-check"></i><b>16.1</b> Protocol overview</a></li>
<li class="chapter" data-level="16.2" data-path="app-chap-wsProtocol.html"><a href="app-chap-wsProtocol.html#protocol-commands"><i class="fa fa-check"></i><b>16.2</b> Protocol commands</a><ul>
<li class="chapter" data-level="16.2.1" data-path="app-chap-wsProtocol.html"><a href="app-chap-wsProtocol.html#getprotocol"><i class="fa fa-check"></i><b>16.2.1</b> <code>GETPROTOCOL</code></a></li>
<li class="chapter" data-level="16.2.2" data-path="app-chap-wsProtocol.html"><a href="app-chap-wsProtocol.html#getdousermanagement"><i class="fa fa-check"></i><b>16.2.2</b> <code>GETDOUSERMANAGEMENT</code></a></li>
<li class="chapter" data-level="16.2.3" data-path="app-chap-wsProtocol.html"><a href="app-chap-wsProtocol.html#logonuser"><i class="fa fa-check"></i><b>16.2.3</b> <code>LOGONUSER</code></a></li>
<li class="chapter" data-level="16.2.4" data-path="app-chap-wsProtocol.html"><a href="app-chap-wsProtocol.html#getglobaldbconfig"><i class="fa fa-check"></i><b>16.2.4</b> <code>GETGLOBALDBCONFIG</code></a></li>
<li class="chapter" data-level="16.2.5" data-path="app-chap-wsProtocol.html"><a href="app-chap-wsProtocol.html#getbundlelist"><i class="fa fa-check"></i><b>16.2.5</b> <code>GETBUNDLELIST</code></a></li>
<li class="chapter" data-level="16.2.6" data-path="app-chap-wsProtocol.html"><a href="app-chap-wsProtocol.html#getbundle"><i class="fa fa-check"></i><b>16.2.6</b> <code>GETBUNDLE</code></a></li>
<li class="chapter" data-level="16.2.7" data-path="app-chap-wsProtocol.html"><a href="app-chap-wsProtocol.html#savebundle"><i class="fa fa-check"></i><b>16.2.7</b> <code>SAVEBUNDLE</code></a></li>
<li class="chapter" data-level="16.2.8" data-path="app-chap-wsProtocol.html"><a href="app-chap-wsProtocol.html#disconnectwarning"><i class="fa fa-check"></i><b>16.2.8</b> <code>DISCONNECTWARNING</code></a></li>
<li class="chapter" data-level="16.2.9" data-path="app-chap-wsProtocol.html"><a href="app-chap-wsProtocol.html#error-handling"><i class="fa fa-check"></i><b>16.2.9</b> Error handling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="app-chap-EQL-EBNF.html"><a href="app-chap-EQL-EBNF.html"><i class="fa fa-check"></i><b>17</b> EQL EBNF</a><ul>
<li class="chapter" data-level="17.1" data-path="app-chap-EQL-EBNF.html"><a href="app-chap-EQL-EBNF.html#terminal-symbols-of-eql2-operators-and-their-meaning"><i class="fa fa-check"></i><b>17.1</b> Terminal symbols of EQL2 (operators) and their meaning</a></li>
<li class="chapter" data-level="17.2" data-path="app-chap-EQL-EBNF.html"><a href="app-chap-EQL-EBNF.html#terminal-symbols-of-eql2-brackets-and-their-meanings."><i class="fa fa-check"></i><b>17.2</b> Terminal symbols of EQL2 (brackets) and their meanings.</a></li>
<li class="chapter" data-level="17.3" data-path="app-chap-EQL-EBNF.html"><a href="app-chap-EQL-EBNF.html#terminal-symbols-of-eql2-functions-and-their-meanings."><i class="fa fa-check"></i><b>17.3</b> Terminal symbols of EQL2 (functions) and their meanings.</a></li>
<li class="chapter" data-level="17.4" data-path="app-chap-EQL-EBNF.html"><a href="app-chap-EQL-EBNF.html#formal-description-of-emu-query-language-version-2"><i class="fa fa-check"></i><b>17.4</b> Formal description of EMU Query Language Version 2</a></li>
<li class="chapter" data-level="17.5" data-path="app-chap-EQL-EBNF.html"><a href="app-chap-EQL-EBNF.html#restrictions"><i class="fa fa-check"></i><b>17.5</b> Restrictions</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="app-chap-eql.html"><a href="app-chap-eql.html"><i class="fa fa-check"></i><b>18</b> EQL: further examples</a><ul>
<li class="chapter" data-level="18.1" data-path="app-chap-eql.html"><a href="app-chap-eql.html#simple-equality-inequality-matching-non-matching-queries-single-argument"><i class="fa fa-check"></i><b>18.1</b> Simple equality, inequality, matching and non-matching queries (single-argument)</a></li>
<li class="chapter" data-level="18.2" data-path="app-chap-eql.html"><a href="app-chap-eql.html#sequence-queries-using-the---sequence-operator"><i class="fa fa-check"></i><b>18.2</b> Sequence queries using the -&gt; sequence operator</a></li>
<li class="chapter" data-level="18.3" data-path="app-chap-eql.html"><a href="app-chap-eql.html#subsequent-sequence-queries-using-nesting-of-the---sequence-operator"><i class="fa fa-check"></i><b>18.3</b> Subsequent sequence queries using nesting of the <code>-&gt;</code> sequence operator</a></li>
<li class="chapter" data-level="18.4" data-path="app-chap-eql.html"><a href="app-chap-eql.html#conjunction-operator"><i class="fa fa-check"></i><b>18.4</b> Conjunction operator &amp;</a></li>
<li class="chapter" data-level="18.5" data-path="app-chap-eql.html"><a href="app-chap-eql.html#domination-operator-hierarchical-queries"><i class="fa fa-check"></i><b>18.5</b> Domination operator ^ (hierarchical queries)</a><ul>
<li class="chapter" data-level="18.5.1" data-path="app-chap-eql.html"><a href="app-chap-eql.html#simple-domination"><i class="fa fa-check"></i><b>18.5.1</b> Simple domination</a></li>
<li class="chapter" data-level="18.5.2" data-path="app-chap-eql.html"><a href="app-chap-eql.html#multiple-domination"><i class="fa fa-check"></i><b>18.5.2</b> Multiple domination</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="app-chap-eql.html"><a href="app-chap-eql.html#position"><i class="fa fa-check"></i><b>18.6</b> Position</a><ul>
<li class="chapter" data-level="18.6.1" data-path="app-chap-eql.html"><a href="app-chap-eql.html#simple-usage-of-start-end-and-medial"><i class="fa fa-check"></i><b>18.6.1</b> Simple usage of <code>Start()</code>, <code>End()</code> and <code>Medial()</code></a></li>
<li class="chapter" data-level="18.6.2" data-path="app-chap-eql.html"><a href="app-chap-eql.html#position-and-boolean"><i class="fa fa-check"></i><b>18.6.2</b> Position and boolean &amp;</a></li>
<li class="chapter" data-level="18.6.3" data-path="app-chap-eql.html"><a href="app-chap-eql.html#position-and-boolean-1"><i class="fa fa-check"></i><b>18.6.3</b> Position and boolean ^</a></li>
<li class="chapter" data-level="18.6.4" data-path="app-chap-eql.html"><a href="app-chap-eql.html#count-and-boolean"><i class="fa fa-check"></i><b>18.6.4</b> Count and boolean <code>&amp;</code></a></li>
<li class="chapter" data-level="18.6.5" data-path="app-chap-eql.html"><a href="app-chap-eql.html#count-and"><i class="fa fa-check"></i><b>18.6.5</b> Count and ^</a></li>
</ul></li>
<li class="chapter" data-level="18.7" data-path="app-chap-eql.html"><a href="app-chap-eql.html#combinations"><i class="fa fa-check"></i><b>18.7</b> Combinations</a><ul>
<li class="chapter" data-level="18.7.1" data-path="app-chap-eql.html"><a href="app-chap-eql.html#and---domination-and-sequence"><i class="fa fa-check"></i><b>18.7.1</b> ^ and -&gt; (domination and sequence)</a></li>
<li class="chapter" data-level="18.7.2" data-path="app-chap-eql.html"><a href="app-chap-eql.html#and---and-domination-and-sequence-and-boolean"><i class="fa fa-check"></i><b>18.7.2</b> ^ and -&gt; and &amp; (domination and sequence and boolean &amp;)</a></li>
</ul></li>
<li class="chapter" data-level="18.8" data-path="app-chap-eql.html"><a href="app-chap-eql.html#a-few-more-questions-and-answers"><i class="fa fa-check"></i><b>18.8</b> A few more questions and answers</a></li>
<li class="chapter" data-level="18.9" data-path="app-chap-eql.html"><a href="app-chap-eql.html#differences-to-the-legacy-emu-query-language"><i class="fa fa-check"></i><b>18.9</b> Differences to the legacy EMU query language</a><ul>
<li class="chapter" data-level="18.9.1" data-path="app-chap-eql.html"><a href="app-chap-eql.html#function-call-syntax"><i class="fa fa-check"></i><b>18.9.1</b> Function call syntax</a></li>
<li class="chapter" data-level="18.9.2" data-path="app-chap-eql.html"><a href="app-chap-eql.html#empty-result"><i class="fa fa-check"></i><b>18.9.2</b> Empty result</a></li>
<li class="chapter" data-level="18.9.3" data-path="app-chap-eql.html"><a href="app-chap-eql.html#the-result-modifier-hash-tag"><i class="fa fa-check"></i><b>18.9.3</b> The result modifier hash tag <code>#</code></a></li>
<li class="chapter" data-level="18.9.4" data-path="app-chap-eql.html"><a href="app-chap-eql.html#interpretation-of-the-hash-tag-in-conjunction-operator-queries"><i class="fa fa-check"></i><b>18.9.4</b> Interpretation of the hash tag <code>#</code> in conjunction operator queries</a></li>
<li class="chapter" data-level="18.9.5" data-path="app-chap-eql.html"><a href="app-chap-eql.html#legacy-emu"><i class="fa fa-check"></i><b>18.9.5</b> legacy EMU</a></li>
</ul></li>
<li class="chapter" data-level="18.10" data-path="app-chap-eql.html"><a href="app-chap-eql.html#bugs-in-legacy-emu-function-emu.query"><i class="fa fa-check"></i><b>18.10</b> Bugs in legacy EMU function <code>emu.query()</code></a><ul>
<li class="chapter" data-level="18.10.1" data-path="app-chap-eql.html"><a href="app-chap-eql.html#alternative-labels-in-inequality-queries"><i class="fa fa-check"></i><b>18.10.1</b> Alternative labels in inequality queries</a></li>
<li class="chapter" data-level="18.10.2" data-path="app-chap-eql.html"><a href="app-chap-eql.html#legacy-emu-1"><i class="fa fa-check"></i><b>18.10.2</b> legacy EMU</a></li>
<li class="chapter" data-level="18.10.3" data-path="app-chap-eql.html"><a href="app-chap-eql.html#emur-1"><i class="fa fa-check"></i><b>18.10.3</b> emuR</a></li>
<li class="chapter" data-level="18.10.4" data-path="app-chap-eql.html"><a href="app-chap-eql.html#errors-caused-by-missing-or-superfluous-blanks-or-parentheses"><i class="fa fa-check"></i><b>18.10.4</b> Errors caused by missing or superfluous blanks or parentheses</a></li>
<li class="chapter" data-level="18.10.5" data-path="app-chap-eql.html"><a href="app-chap-eql.html#order-of-result-segment-list"><i class="fa fa-check"></i><b>18.10.5</b> Order of result segment list</a></li>
<li class="chapter" data-level="18.10.6" data-path="app-chap-eql.html"><a href="app-chap-eql.html#additional-features"><i class="fa fa-check"></i><b>18.10.6</b> Additional features</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="app-chap-wrassp.html"><a href="app-chap-wrassp.html"><i class="fa fa-check"></i><b>19</b> <code>wrassp</code></a><ul>
<li class="chapter" data-level="19.1" data-path="app-chap-wrassp.html"><a href="app-chap-wrassp.html#sec:app-chap-wrassp-praatsSigProc"><i class="fa fa-check"></i><b>19.1</b> Using Praat’s signal processing routines in the EMU-SDMS</a><ul>
<li class="chapter" data-level="19.1.1" data-path="app-chap-wrassp.html"><a href="app-chap-wrassp.html#to-formant-burg...-to-ssff-files"><i class="fa fa-check"></i><b>19.1.1</b> <code>To Formant (burg)...</code> to SSFF files</a></li>
<li class="chapter" data-level="19.1.2" data-path="app-chap-wrassp.html"><a href="app-chap-wrassp.html#to-pitch...-to-ssff-files"><i class="fa fa-check"></i><b>19.1.2</b> <code>To Pitch...</code> to SSFF files</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="app-chap-wrassp.html"><a href="app-chap-wrassp.html#sec:app-chap-wrassp-opensmileSigProc"><i class="fa fa-check"></i><b>19.2</b> Using OpenSMILE signal processing routines in the EMU-SDMS</a></li>
</ul></li>
<li class="part"><span><b>VI Recipes</b></span></li>
<li class="chapter" data-level="20" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i><b>20</b> About</a></li>
<li class="chapter" data-level="21" data-path="recipe-spectralAnalysis.html"><a href="recipe-spectralAnalysis.html"><i class="fa fa-check"></i><b>21</b> Spectral analysis</a><ul>
<li class="chapter" data-level="21.1" data-path="recipe-spectralAnalysis.html"><a href="recipe-spectralAnalysis.html#how-to-quantify-differences-between-spectra"><i class="fa fa-check"></i><b>21.1</b> How to quantify differences between spectra?</a></li>
<li class="chapter" data-level="21.2" data-path="recipe-spectralAnalysis.html"><a href="recipe-spectralAnalysis.html#discrete-cosine-transform-dct"><i class="fa fa-check"></i><b>21.2</b> Discrete Cosine Transform (DCT)</a></li>
<li class="chapter" data-level="21.3" data-path="recipe-spectralAnalysis.html"><a href="recipe-spectralAnalysis.html#dct-coefficients"><i class="fa fa-check"></i><b>21.3</b> DCT coefficients</a><ul>
<li class="chapter" data-level="21.3.1" data-path="recipe-spectralAnalysis.html"><a href="recipe-spectralAnalysis.html#p.s.-use-dct-in-order-to-smooth-formant-trajectories"><i class="fa fa-check"></i><b>21.3.1</b> P.S.: Use DCT in order to smooth formant trajectories</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="recipe-spectralAnalysis.html"><a href="recipe-spectralAnalysis.html#spectral-moments"><i class="fa fa-check"></i><b>21.4</b> Spectral moments</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="recipe-plottingSnippets.html"><a href="recipe-plottingSnippets.html"><i class="fa fa-check"></i><b>22</b> Plotting snippets</a><ul>
<li class="chapter" data-level="22.1" data-path="recipe-plottingSnippets.html"><a href="recipe-plottingSnippets.html#formant-trajectory-plots-equivalent-to-the-legacy-dplot...-normalise-tf-average-tf..."><i class="fa fa-check"></i><b>22.1</b> Formant trajectory plots (equivalent to the legacy <code>dplot(..., normalise = T/F, average = T/F,...)</code>)</a></li>
<li class="chapter" data-level="22.2" data-path="recipe-plottingSnippets.html"><a href="recipe-plottingSnippets.html#f1f2-plots-equivalent-to-the-legacy-eplot...-dopoints-tf-doellipse-tf-centroid-tf-..."><i class="fa fa-check"></i><b>22.2</b> F1/F2 plots (equivalent to the legacy <code>eplot(..., dopoints = T/F, doellipse = T/F, centroid = T/F, ...)</code>)</a></li>
<li class="chapter" data-level="22.3" data-path="recipe-plottingSnippets.html"><a href="recipe-plottingSnippets.html#f1f2-plot-separated-by-speaker"><i class="fa fa-check"></i><b>22.3</b> F1/F2 plot separated by speaker</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="version-control-of-emudbs-with-git-git-lfs-and-gitlab.html"><a href="version-control-of-emudbs-with-git-git-lfs-and-gitlab.html"><i class="fa fa-check"></i><b>23</b> Version control of emuDBs with Git, Git LFS and GitLab</a><ul>
<li class="chapter" data-level="23.1" data-path="version-control-of-emudbs-with-git-git-lfs-and-gitlab.html"><a href="version-control-of-emudbs-with-git-git-lfs-and-gitlab.html#setup"><i class="fa fa-check"></i><b>23.1</b> Setup</a><ul>
<li class="chapter" data-level="23.1.1" data-path="version-control-of-emudbs-with-git-git-lfs-and-gitlab.html"><a href="version-control-of-emudbs-with-git-git-lfs-and-gitlab.html#using-gitlab-to-host-the-emudb"><i class="fa fa-check"></i><b>23.1.1</b> Using GitLab to host the emuDB</a></li>
</ul></li>
<li class="chapter" data-level="23.2" data-path="version-control-of-emudbs-with-git-git-lfs-and-gitlab.html"><a href="version-control-of-emudbs-with-git-git-lfs-and-gitlab.html#collaborating-with-others"><i class="fa fa-check"></i><b>23.2</b> Collaborating with others</a><ul>
<li class="chapter" data-level="23.2.1" data-path="version-control-of-emudbs-with-git-git-lfs-and-gitlab.html"><a href="version-control-of-emudbs-with-git-git-lfs-and-gitlab.html#default-work-flow"><i class="fa fa-check"></i><b>23.2.1</b> Default work-flow</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The EMU-SDMS Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="app-chap:wrassp" class="section level1">
<h1><span class="header-section-number">19</span> <code>wrassp</code></h1>
<div id="sec:app-chap-wrassp-praatsSigProc" class="section level2">
<h2><span class="header-section-number">19.1</span> Using Praat’s signal processing routines in the EMU-SDMS</h2>
<div id="to-formant-burg...-to-ssff-files" class="section level3">
<h3><span class="header-section-number">19.1.1</span> <code>To Formant (burg)...</code> to SSFF files</h3>
<p>The R code snippet below shows how generating an <code>AsspDataObj</code> from scratch can be used in a function to place data from other sources into SSFF files. In this case it uses the <code>PraatR</code> R package (see <a href="http://www.aaronalbin.com/praatr/index.html" class="uri">http://www.aaronalbin.com/praatr/index.html</a>) to execute Praat’s <code>"To Formant (burg)..."</code> function to then store the data to a comma separated file using <code>"Down to Table..."</code>. The generated table is then read into R and the appropriate columns are placed into tracks of a <code>AsspDataObj</code> object. The <code>PraatToFormants2AsspDataObj</code> can be viewed as a template function as it can easily be adapted to use other functions provided by Praat or even other external tools.</p>
<p>NOTE: this function can be accessed directly: <code>source("https://raw.githubusercontent.com/IPS-LMU/The-EMU-SDMS-Manual/master/R/praatToFormants2AsspDataObj.R")</code></p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb383-1" title="1"><span class="co">###################################</span></a>
<a class="sourceLine" id="cb383-2" title="2"><span class="co"># uncomment and execute the next</span></a>
<a class="sourceLine" id="cb383-3" title="3"><span class="co"># two lines to install PraatR</span></a>
<a class="sourceLine" id="cb383-4" title="4"><span class="co"># library(devtools)</span></a>
<a class="sourceLine" id="cb383-5" title="5"><span class="co"># install_github(&#39;usagi5886/PraatR&#39;)</span></a>
<a class="sourceLine" id="cb383-6" title="6"><span class="kw">library</span>(PraatR)</a>
<a class="sourceLine" id="cb383-7" title="7"></a>
<a class="sourceLine" id="cb383-8" title="8"><span class="co">##&#39; Call Praat&#39;s To Formant (burg)... function and</span></a>
<a class="sourceLine" id="cb383-9" title="9"><span class="co">##&#39; convert the output to an AsspDataObj object</span></a>
<a class="sourceLine" id="cb383-10" title="10"><span class="co">##&#39; @param path path to wav file</span></a>
<a class="sourceLine" id="cb383-11" title="11"><span class="co">##&#39; @param command Praat command to use</span></a>
<a class="sourceLine" id="cb383-12" title="12"><span class="co">##&#39; @param arguments arguments passed to \code{PraatR::praat()} arguments argument</span></a>
<a class="sourceLine" id="cb383-13" title="13"><span class="co">##&#39; @param columnNames specify column names of AsspDataObj</span></a>
<a class="sourceLine" id="cb383-14" title="14">praatToFormants2AsspDataObj &lt;-<span class="st"> </span><span class="cf">function</span>(path,</a>
<a class="sourceLine" id="cb383-15" title="15">                                        <span class="dt">command =</span> <span class="st">&quot;To Formant (burg)...&quot;</span>,</a>
<a class="sourceLine" id="cb383-16" title="16">                                        <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="fl">0.0</span>,</a>
<a class="sourceLine" id="cb383-17" title="17">                                                         <span class="dv">5</span>,</a>
<a class="sourceLine" id="cb383-18" title="18">                                                         <span class="dv">5500</span>,</a>
<a class="sourceLine" id="cb383-19" title="19">                                                         <span class="fl">0.025</span>,</a>
<a class="sourceLine" id="cb383-20" title="20">                                                         <span class="dv">50</span>),</a>
<a class="sourceLine" id="cb383-21" title="21">                                        <span class="dt">columnNames =</span> <span class="kw">c</span>(<span class="st">&quot;fm&quot;</span>, <span class="st">&quot;bw&quot;</span>)){</a>
<a class="sourceLine" id="cb383-22" title="22"></a>
<a class="sourceLine" id="cb383-23" title="23">  tmp1FileName =<span class="st"> &quot;tmp.ooTextFile&quot;</span></a>
<a class="sourceLine" id="cb383-24" title="24">  tmp2FileName =<span class="st"> &quot;tmp.table&quot;</span></a>
<a class="sourceLine" id="cb383-25" title="25"></a>
<a class="sourceLine" id="cb383-26" title="26">  tmp1FilePath =<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp1FileName)</a>
<a class="sourceLine" id="cb383-27" title="27">  tmp2FilePath =<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp2FileName)</a>
<a class="sourceLine" id="cb383-28" title="28"></a>
<a class="sourceLine" id="cb383-29" title="29">  <span class="co"># remove tmp files if they already exist</span></a>
<a class="sourceLine" id="cb383-30" title="30">  <span class="kw">unlink</span>(<span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp1FileName))</a>
<a class="sourceLine" id="cb383-31" title="31">  <span class="kw">unlink</span>(<span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp2FileName))</a>
<a class="sourceLine" id="cb383-32" title="32"></a>
<a class="sourceLine" id="cb383-33" title="33">  <span class="co"># generate ooTextFile</span></a>
<a class="sourceLine" id="cb383-34" title="34">  PraatR<span class="op">::</span><span class="kw">praat</span>(<span class="dt">command =</span> command,</a>
<a class="sourceLine" id="cb383-35" title="35">                <span class="dt">input=</span>path,</a>
<a class="sourceLine" id="cb383-36" title="36">                <span class="dt">arguments =</span> arguments,</a>
<a class="sourceLine" id="cb383-37" title="37">                <span class="dt">output =</span> tmp1FilePath)</a>
<a class="sourceLine" id="cb383-38" title="38"></a>
<a class="sourceLine" id="cb383-39" title="39">  <span class="co"># convert to Table</span></a>
<a class="sourceLine" id="cb383-40" title="40">  PraatR<span class="op">::</span><span class="kw">praat</span>(<span class="st">&quot;Down to Table...&quot;</span>,</a>
<a class="sourceLine" id="cb383-41" title="41">                <span class="dt">input =</span> tmp1FilePath,</a>
<a class="sourceLine" id="cb383-42" title="42">                <span class="dt">arguments =</span> <span class="kw">list</span>(F, T, <span class="dv">6</span>, F, <span class="dv">3</span>, T, <span class="dv">3</span>, T),</a>
<a class="sourceLine" id="cb383-43" title="43">                <span class="dt">output =</span> tmp2FilePath,</a>
<a class="sourceLine" id="cb383-44" title="44">                <span class="dt">filetype=</span><span class="st">&quot;comma-separated&quot;</span>)</a>
<a class="sourceLine" id="cb383-45" title="45"></a>
<a class="sourceLine" id="cb383-46" title="46">  <span class="co"># get vals</span></a>
<a class="sourceLine" id="cb383-47" title="47">  df =<span class="st"> </span><span class="kw">read.csv</span>(tmp2FilePath, <span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb383-48" title="48">  df[df <span class="op">==</span><span class="st"> &#39;--undefined--&#39;</span>] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb383-49" title="49"></a>
<a class="sourceLine" id="cb383-50" title="50">  fmVals =<span class="st"> </span>df[,<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">11</span>)]</a>
<a class="sourceLine" id="cb383-51" title="51">  fmVals =<span class="st"> </span><span class="kw">sapply</span>(<span class="kw">colnames</span>(fmVals), <span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb383-52" title="52">    <span class="kw">as.integer</span>(fmVals[,x])</a>
<a class="sourceLine" id="cb383-53" title="53">  })</a>
<a class="sourceLine" id="cb383-54" title="54">  <span class="kw">colnames</span>(fmVals) =<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb383-55" title="55">  bwVals =<span class="st"> </span><span class="kw">data.matrix</span>(df[,<span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">12</span>)])</a>
<a class="sourceLine" id="cb383-56" title="56">  bwVals =<span class="st"> </span><span class="kw">sapply</span>(<span class="kw">colnames</span>(bwVals), <span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb383-57" title="57">    <span class="kw">as.integer</span>(bwVals[,x])</a>
<a class="sourceLine" id="cb383-58" title="58">  })</a>
<a class="sourceLine" id="cb383-59" title="59">  <span class="kw">colnames</span>(bwVals) =<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb383-60" title="60"></a>
<a class="sourceLine" id="cb383-61" title="61">  <span class="co"># get start time</span></a>
<a class="sourceLine" id="cb383-62" title="62">  startTime =<span class="st"> </span>df[<span class="dv">1</span>,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb383-63" title="63"></a>
<a class="sourceLine" id="cb383-64" title="64">  <span class="co"># create AsspDataObj</span></a>
<a class="sourceLine" id="cb383-65" title="65">  ado =<span class="st"> </span><span class="kw">list</span>()</a>
<a class="sourceLine" id="cb383-66" title="66"></a>
<a class="sourceLine" id="cb383-67" title="67">  <span class="kw">attr</span>(ado, <span class="st">&quot;trackFormats&quot;</span>) =<span class="kw">c</span>(<span class="st">&quot;INT16&quot;</span>, <span class="st">&quot;INT16&quot;</span>)</a>
<a class="sourceLine" id="cb383-68" title="68"></a>
<a class="sourceLine" id="cb383-69" title="69">  <span class="cf">if</span>(arguments[[<span class="dv">1</span>]] <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb383-70" title="70">    sR =<span class="st"> </span><span class="dv">1</span> <span class="op">/</span><span class="st"> </span>(<span class="fl">0.25</span> <span class="op">*</span><span class="st"> </span>arguments[[<span class="dv">4</span>]])</a>
<a class="sourceLine" id="cb383-71" title="71">  }<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb383-72" title="72">    sR =<span class="st"> </span><span class="dv">1</span> <span class="op">/</span><span class="st"> </span>arguments[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb383-73" title="73">  }</a>
<a class="sourceLine" id="cb383-74" title="74"></a>
<a class="sourceLine" id="cb383-75" title="75">  <span class="kw">attr</span>(ado, <span class="st">&quot;sampleRate&quot;</span>) =<span class="st"> </span>sR</a>
<a class="sourceLine" id="cb383-76" title="76"></a>
<a class="sourceLine" id="cb383-77" title="77">  tmpObj =<span class="st"> </span>wrassp<span class="op">::</span><span class="kw">read.AsspDataObj</span>(path)</a>
<a class="sourceLine" id="cb383-78" title="78">  <span class="kw">attr</span>(ado, <span class="st">&quot;origFreq&quot;</span>) =<span class="st"> </span><span class="kw">attr</span>(tmpObj, <span class="st">&quot;sampleRate&quot;</span>)</a>
<a class="sourceLine" id="cb383-79" title="79"></a>
<a class="sourceLine" id="cb383-80" title="80">  <span class="kw">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>) =<span class="st"> </span>startTime</a>
<a class="sourceLine" id="cb383-81" title="81"></a>
<a class="sourceLine" id="cb383-82" title="82">  <span class="co"># attr(ado, &quot;startRecord&quot;) = as.integer(1)</span></a>
<a class="sourceLine" id="cb383-83" title="83"></a>
<a class="sourceLine" id="cb383-84" title="84">  <span class="kw">attr</span>(ado, <span class="st">&quot;endRecord&quot;</span>) =<span class="st"> </span><span class="kw">as.integer</span>(<span class="kw">nrow</span>(fmVals))</a>
<a class="sourceLine" id="cb383-85" title="85"></a>
<a class="sourceLine" id="cb383-86" title="86">  <span class="kw">class</span>(ado) =<span class="st"> &quot;AsspDataObj&quot;</span></a>
<a class="sourceLine" id="cb383-87" title="87"></a>
<a class="sourceLine" id="cb383-88" title="88">  wrassp<span class="op">::</span><span class="kw">AsspFileFormat</span>(ado) &lt;-<span class="st"> &quot;SSFF&quot;</span></a>
<a class="sourceLine" id="cb383-89" title="89">  wrassp<span class="op">::</span><span class="kw">AsspDataFormat</span>(ado) &lt;-<span class="st"> </span><span class="kw">as.integer</span>(<span class="dv">2</span>) <span class="co"># == binary</span></a>
<a class="sourceLine" id="cb383-90" title="90"></a>
<a class="sourceLine" id="cb383-91" title="91">  ado =<span class="st"> </span>wrassp<span class="op">::</span><span class="kw">addTrack</span>(ado, columnNames[<span class="dv">1</span>], fmVals, <span class="st">&quot;INT16&quot;</span>)</a>
<a class="sourceLine" id="cb383-92" title="92"></a>
<a class="sourceLine" id="cb383-93" title="93">  ado =<span class="st"> </span>wrassp<span class="op">::</span><span class="kw">addTrack</span>(ado, columnNames[<span class="dv">2</span>], bwVals, <span class="st">&quot;INT16&quot;</span>)</a>
<a class="sourceLine" id="cb383-94" title="94"></a>
<a class="sourceLine" id="cb383-95" title="95">  <span class="co"># add missing values at the start as Praat sometimes</span></a>
<a class="sourceLine" id="cb383-96" title="96">  <span class="co"># has very late start values which causes issues</span></a>
<a class="sourceLine" id="cb383-97" title="97">  <span class="co"># in the SSFF file format as this sets the startRecord</span></a>
<a class="sourceLine" id="cb383-98" title="98">  <span class="co"># depending on the start time of the first sample</span></a>
<a class="sourceLine" id="cb383-99" title="99">  <span class="cf">if</span>(startTime <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span><span class="op">/</span>sR){</a>
<a class="sourceLine" id="cb383-100" title="100">    nr_of_missing_samples =<span class="st"> </span><span class="kw">floor</span>(startTime <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span><span class="op">/</span>sR))</a>
<a class="sourceLine" id="cb383-101" title="101"></a>
<a class="sourceLine" id="cb383-102" title="102">    missing_fm_vals =<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">0</span>,</a>
<a class="sourceLine" id="cb383-103" title="103">                             <span class="dt">nrow =</span> nr_of_missing_samples,</a>
<a class="sourceLine" id="cb383-104" title="104">                             <span class="dt">ncol =</span> <span class="kw">ncol</span>(ado<span class="op">$</span>fm))</a>
<a class="sourceLine" id="cb383-105" title="105"></a>
<a class="sourceLine" id="cb383-106" title="106">    missing_bw_vals =<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">0</span>,</a>
<a class="sourceLine" id="cb383-107" title="107">                             <span class="dt">nrow =</span> nr_of_missing_samples,</a>
<a class="sourceLine" id="cb383-108" title="108">                             <span class="dt">ncol =</span> <span class="kw">ncol</span>(ado<span class="op">$</span>bw))</a>
<a class="sourceLine" id="cb383-109" title="109"></a>
<a class="sourceLine" id="cb383-110" title="110">    <span class="co"># prepend values</span></a>
<a class="sourceLine" id="cb383-111" title="111">    ado<span class="op">$</span>fm =<span class="st"> </span><span class="kw">rbind</span>(missing_fm_vals, ado<span class="op">$</span>fm)</a>
<a class="sourceLine" id="cb383-112" title="112">    ado<span class="op">$</span>bw =<span class="st"> </span><span class="kw">rbind</span>(missing_fm_vals, ado<span class="op">$</span>bw)</a>
<a class="sourceLine" id="cb383-113" title="113"></a>
<a class="sourceLine" id="cb383-114" title="114">    <span class="co"># fix start time</span></a>
<a class="sourceLine" id="cb383-115" title="115">    <span class="kw">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>) =<span class="st"> </span>startTime <span class="op">-</span><span class="st"> </span>nr_of_missing_samples <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span><span class="op">/</span>sR)</a>
<a class="sourceLine" id="cb383-116" title="116">  }</a>
<a class="sourceLine" id="cb383-117" title="117"></a>
<a class="sourceLine" id="cb383-118" title="118"></a>
<a class="sourceLine" id="cb383-119" title="119">  <span class="kw">return</span>(ado)</a>
<a class="sourceLine" id="cb383-120" title="120">}</a></code></pre></div>
<p>How this function can be applied to wav files of an emuDB is shown below.</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb384-1" title="1"><span class="kw">library</span>(emuR)</a>
<a class="sourceLine" id="cb384-2" title="2"></a>
<a class="sourceLine" id="cb384-3" title="3"><span class="co"># create demo data in tempdir()</span></a>
<a class="sourceLine" id="cb384-4" title="4"><span class="kw">create_emuRdemoData</span>(<span class="kw">tempdir</span>())</a>
<a class="sourceLine" id="cb384-5" title="5"></a>
<a class="sourceLine" id="cb384-6" title="6"><span class="co"># create path to demo database</span></a>
<a class="sourceLine" id="cb384-7" title="7">path2ae =<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), <span class="st">&quot;emuR_demoData&quot;</span>, <span class="st">&quot;ae_emuDB&quot;</span>)</a>
<a class="sourceLine" id="cb384-8" title="8"></a>
<a class="sourceLine" id="cb384-9" title="9"><span class="co"># list all .wav files in the ae emuDB</span></a>
<a class="sourceLine" id="cb384-10" title="10">paths2wavFiles =<span class="st"> </span><span class="kw">list.files</span>(path2ae, <span class="dt">pattern =</span> <span class="st">&quot;*.wav$&quot;</span>, </a>
<a class="sourceLine" id="cb384-11" title="11">                            <span class="dt">recursive =</span> <span class="ot">TRUE</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb384-12" title="12"></a>
<a class="sourceLine" id="cb384-13" title="13"><span class="co"># loop through files</span></a>
<a class="sourceLine" id="cb384-14" title="14"><span class="cf">for</span>(fp <span class="cf">in</span> paths2wavFiles){</a>
<a class="sourceLine" id="cb384-15" title="15">  ado =<span class="st"> </span><span class="kw">praatToFormants2AsspDataObj</span>(fp)</a>
<a class="sourceLine" id="cb384-16" title="16">  newPath =<span class="st"> </span><span class="kw">paste0</span>(tools<span class="op">::</span><span class="kw">file_path_sans_ext</span>(fp), <span class="st">&#39;.praatFms&#39;</span>)</a>
<a class="sourceLine" id="cb384-17" title="17">  <span class="co"># print(paste0(fp, &#39; -&gt; &#39;, newPath)) # uncomment for simple log</span></a>
<a class="sourceLine" id="cb384-18" title="18">  wrassp<span class="op">::</span><span class="kw">write.AsspDataObj</span>(ado, <span class="dt">file =</span> newPath)</a>
<a class="sourceLine" id="cb384-19" title="19">}</a>
<a class="sourceLine" id="cb384-20" title="20"></a>
<a class="sourceLine" id="cb384-21" title="21"><span class="co"># load emuDB</span></a>
<a class="sourceLine" id="cb384-22" title="22">ae =<span class="st"> </span><span class="kw">load_emuDB</span>(path2ae, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb384-23" title="23"></a>
<a class="sourceLine" id="cb384-24" title="24"><span class="co"># add SSFF track definition</span></a>
<a class="sourceLine" id="cb384-25" title="25"><span class="kw">add_ssffTrackDefinition</span>(ae, </a>
<a class="sourceLine" id="cb384-26" title="26">                        <span class="dt">name =</span> <span class="st">&quot;praatFms&quot;</span>, </a>
<a class="sourceLine" id="cb384-27" title="27">                        <span class="dt">columnName =</span> <span class="st">&quot;fm&quot;</span>,</a>
<a class="sourceLine" id="cb384-28" title="28">                        <span class="dt">fileExtension =</span> <span class="st">&quot;praatFms&quot;</span>)</a>
<a class="sourceLine" id="cb384-29" title="29"></a>
<a class="sourceLine" id="cb384-30" title="30"><span class="co"># test query + get_trackdata</span></a>
<a class="sourceLine" id="cb384-31" title="31">sl =<span class="st"> </span><span class="kw">query</span>(ae, <span class="st">&quot;Phonetic == n&quot;</span>)</a>
<a class="sourceLine" id="cb384-32" title="32"></a>
<a class="sourceLine" id="cb384-33" title="33">td =<span class="st"> </span><span class="kw">get_trackdata</span>(ae, sl, <span class="dt">ssffTrackName =</span> <span class="st">&quot;praatFms&quot;</span>, <span class="dt">verbose =</span> F)</a></code></pre></div>
</div>
<div id="to-pitch...-to-ssff-files" class="section level3">
<h3><span class="header-section-number">19.1.2</span> <code>To Pitch...</code> to SSFF files</h3>
<p>The R code snippet below does the following:</p>
<ol style="list-style-type: lower-alpha">
<li>calculates f0 via Praat’s “To Pitch…” command;</li>
<li>smooths the f0 contour via Praat’s “Smooth” command, if parameter “smooth” is set to TRUE</li>
<li>creates a PitchTier and then a TableOfReal</li>
<li>converts all of this into an AsspDataObj (which later on can be saved as an SSFF-file.)</li>
</ol>
<p>A few comments about synchronized F0 and Formant values, whenever <code>praatToFormants2AsspDataObj()</code> and
<code>praatToPitch2AsspDataObj()</code> are involved:</p>
<ul>
<li>Be careful with the arguments list:</li>
<li><strong>The first entry is "Time step (s) (standard value: 0.0) the measurement interval (frame duration), in seconds.</strong>
If you supply 0, Praat will use a time step of 0.75 / (pitch floor), e.g. 0.01 seconds if the pitch floor is 75 Hz;
in this example, Praat computes 100 pitch values per second. "
Here parameter 1 - Time step - is set to 0.00625 (Seconds) (as opposed to Praat’s default of 0.0) in order
to keep it in line with Time step in “To Formant…”,
because Time step in “To Formants…” is derived from
window length (which in “To Formant…” defaults to 0.025) (window length/4 (–&gt; Time step in “To Formant…”
will usually be 0.00625))</li>
<li><strong>The second parameter "Pitch floor (Hz) (standard value: 75 Hz)</strong>:
candidates below this frequency will not be recruited.
This parameter determines the length of the analysis window: it will be 3 longest periods long, i.e.,
if the pitch floor is 75 Hz, the window will be 3/75 = 0.04 seconds long.
Note that if you set the time step to zero, the analysis windows for consecutive measurements will overlap appreciably:
Praat will always compute 4 pitch values within one window length, i.e., the degree of oversampling is 4."
Importantly, this parameter is set NOT to praat’s default 75 Hz, but to 60 Hz, again because of correspondance
of window lengths between “To Pitch…” and “To Formants…”. The actual window length in “To Formants…” will be twice as long
as the value given in the “To Formants…” command, i.e. the default of 0.025 will result in a window length of 0.05.
A window length in “To Pitch…” can indirectly achieved by using a pitch floor value of 60 Hz (given that 3/60 = 0.05).
In most cases, differing window lengths will not affect the temporal position of the F0 and Formant values, however, due
to problems near the edges, sometimes they will (and therefore result in non-synchronized F0 and Formant values).
Due to rounding errors, F0 and Formant values still might be slightly asynchronous; to avoid this, <code>praatToPitch2AsspDataObj()</code>
rounds the start time with a precicion of 0.001 ms (via round(attr(ado, “startTime”),6) in the very end).</li>
<li><strong>The third parameter (default: 600) is the pitch ceiling</strong> (and this parameter will not affect any other parameters indirectly)</li>
</ul>
<p>NOTE: this function can be accessed directly: <code>source("https://raw.githubusercontent.com/IPS-LMU/The-EMU-SDMS-Manual/master/R/praatToPitch2AsspDataObj.R")</code></p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb385-1" title="1"><span class="co">###################################</span></a>
<a class="sourceLine" id="cb385-2" title="2"><span class="co"># uncomment and execute the next</span></a>
<a class="sourceLine" id="cb385-3" title="3"><span class="co"># two lines to install PraatR</span></a>
<a class="sourceLine" id="cb385-4" title="4"><span class="co"># library(devtools)</span></a>
<a class="sourceLine" id="cb385-5" title="5"><span class="co"># install_github(&#39;usagi5886/PraatR&#39;)</span></a>
<a class="sourceLine" id="cb385-6" title="6"><span class="kw">library</span>(PraatR)</a>
<a class="sourceLine" id="cb385-7" title="7"></a>
<a class="sourceLine" id="cb385-8" title="8"><span class="co">##&#39; Call Praat&#39;s To Pitch... function and</span></a>
<a class="sourceLine" id="cb385-9" title="9"><span class="co">##&#39; convert the output to an AsspDataObj object</span></a>
<a class="sourceLine" id="cb385-10" title="10"><span class="co">##&#39; @param path path to wav file</span></a>
<a class="sourceLine" id="cb385-11" title="11"><span class="co">##&#39; @param command Praat command to use</span></a>
<a class="sourceLine" id="cb385-12" title="12"><span class="co">##&#39; @param arguments arguments passed to \code{PraatR::praat()} arguments argument</span></a>
<a class="sourceLine" id="cb385-13" title="13"><span class="co">##&#39; @param columnNames specify column names of AsspDataObj</span></a>
<a class="sourceLine" id="cb385-14" title="14"><span class="co">##&#39; @param smooth apply Praat&#39;s &quot;Smooth&quot; command</span></a>
<a class="sourceLine" id="cb385-15" title="15">praatToPitch2AsspDataObj &lt;-<span class="st"> </span><span class="cf">function</span>(path,</a>
<a class="sourceLine" id="cb385-16" title="16">                                     <span class="dt">command =</span> <span class="st">&quot;To Pitch...&quot;</span>,</a>
<a class="sourceLine" id="cb385-17" title="17">                                     <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="fl">0.00625</span>,</a>
<a class="sourceLine" id="cb385-18" title="18">                                                      <span class="fl">60.0</span>,</a>
<a class="sourceLine" id="cb385-19" title="19">                                                      <span class="fl">600.0</span>),</a>
<a class="sourceLine" id="cb385-20" title="20">                                     <span class="dt">columnNames =</span> <span class="kw">c</span>(<span class="st">&quot;f0&quot;</span>),</a>
<a class="sourceLine" id="cb385-21" title="21">                                     <span class="dt">smooth =</span> <span class="ot">TRUE</span>){</a>
<a class="sourceLine" id="cb385-22" title="22"></a>
<a class="sourceLine" id="cb385-23" title="23">  tmp1FileName =<span class="st"> &quot;tmp.ooTextFile&quot;</span></a>
<a class="sourceLine" id="cb385-24" title="24">  tmp2FileName =<span class="st"> &quot;tmp2.ooTextFile&quot;</span></a>
<a class="sourceLine" id="cb385-25" title="25">  tmp3FileName =<span class="st"> &quot;tmp3.PitchTier&quot;</span></a>
<a class="sourceLine" id="cb385-26" title="26">  tmp4FileName =<span class="st"> &quot;tmp4.txt&quot;</span></a>
<a class="sourceLine" id="cb385-27" title="27"></a>
<a class="sourceLine" id="cb385-28" title="28">  tmp1FilePath =<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp1FileName)</a>
<a class="sourceLine" id="cb385-29" title="29">  tmp2FilePath =<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp2FileName)</a>
<a class="sourceLine" id="cb385-30" title="30">  tmp3FilePath =<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp3FileName)</a>
<a class="sourceLine" id="cb385-31" title="31">  tmp4FilePath =<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp4FileName)</a>
<a class="sourceLine" id="cb385-32" title="32"></a>
<a class="sourceLine" id="cb385-33" title="33">  <span class="co"># remove tmp files if they already exist</span></a>
<a class="sourceLine" id="cb385-34" title="34">  <span class="kw">unlink</span>(<span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp1FileName))</a>
<a class="sourceLine" id="cb385-35" title="35">  <span class="kw">unlink</span>(<span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp2FileName))</a>
<a class="sourceLine" id="cb385-36" title="36">  <span class="kw">unlink</span>(<span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp3FileName))</a>
<a class="sourceLine" id="cb385-37" title="37">  <span class="kw">unlink</span>(<span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp4FileName))</a>
<a class="sourceLine" id="cb385-38" title="38"></a>
<a class="sourceLine" id="cb385-39" title="39">  <span class="co"># generate ooTextFile</span></a>
<a class="sourceLine" id="cb385-40" title="40">  PraatR<span class="op">::</span><span class="kw">praat</span>(<span class="dt">command =</span> command,</a>
<a class="sourceLine" id="cb385-41" title="41">                <span class="dt">input=</span>path,</a>
<a class="sourceLine" id="cb385-42" title="42">                <span class="dt">arguments =</span> arguments,</a>
<a class="sourceLine" id="cb385-43" title="43">                <span class="dt">output =</span> tmp1FilePath,</a>
<a class="sourceLine" id="cb385-44" title="44">                <span class="dt">overwrite =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb385-45" title="45"></a>
<a class="sourceLine" id="cb385-46" title="46">  <span class="cf">if</span> (smooth){</a>
<a class="sourceLine" id="cb385-47" title="47">    PraatR<span class="op">::</span><span class="kw">praat</span>(<span class="st">&quot;Smooth...&quot;</span>,</a>
<a class="sourceLine" id="cb385-48" title="48">                  <span class="dt">input =</span> tmp1FilePath,</a>
<a class="sourceLine" id="cb385-49" title="49">                  <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb385-50" title="50">                  <span class="dt">output =</span> tmp2FilePath,</a>
<a class="sourceLine" id="cb385-51" title="51">                  <span class="dt">overwrite =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb385-52" title="52">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb385-53" title="53">    tmp2FilePath =<span class="st"> </span>tmp1FilePath</a>
<a class="sourceLine" id="cb385-54" title="54">  }</a>
<a class="sourceLine" id="cb385-55" title="55">  nframes =<span class="st"> </span><span class="kw">as.numeric</span>(PraatR<span class="op">::</span><span class="kw">praat</span>(<span class="st">&quot;Get number of frames&quot;</span>,</a>
<a class="sourceLine" id="cb385-56" title="56">                                     <span class="dt">input =</span> tmp2FilePath,</a>
<a class="sourceLine" id="cb385-57" title="57">                                     <span class="dt">simplify =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb385-58" title="58">  timestep =<span class="st"> </span><span class="kw">as.numeric</span>((PraatR<span class="op">::</span><span class="kw">praat</span>(<span class="st">&quot;Get time step&quot;</span>,</a>
<a class="sourceLine" id="cb385-59" title="59">                                       <span class="dt">input =</span> tmp2FilePath,</a>
<a class="sourceLine" id="cb385-60" title="60">                                       <span class="dt">simplify =</span> <span class="ot">TRUE</span>)))</a>
<a class="sourceLine" id="cb385-61" title="61">  sR =<span class="st"> </span><span class="dv">1</span><span class="op">/</span>timestep</a>
<a class="sourceLine" id="cb385-62" title="62">  start =<span class="st"> </span><span class="kw">as.numeric</span>((PraatR<span class="op">::</span><span class="kw">praat</span>(<span class="st">&quot;Get time from frame number...&quot;</span>,</a>
<a class="sourceLine" id="cb385-63" title="63">                                    <span class="dt">input =</span> tmp2FilePath,</a>
<a class="sourceLine" id="cb385-64" title="64">                                    <span class="dt">simplify =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb385-65" title="65">                                    <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="dv">1</span>))))</a>
<a class="sourceLine" id="cb385-66" title="66">  end =<span class="st"> </span><span class="kw">as.numeric</span>((PraatR<span class="op">::</span><span class="kw">praat</span>(<span class="st">&quot;Get time from frame number...&quot;</span>,</a>
<a class="sourceLine" id="cb385-67" title="67">                                  <span class="dt">input =</span> tmp2FilePath,</a>
<a class="sourceLine" id="cb385-68" title="68">                                  <span class="dt">simplify =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb385-69" title="69">                                  <span class="dt">arguments =</span> <span class="kw">list</span>(nframes))))</a>
<a class="sourceLine" id="cb385-70" title="70"></a>
<a class="sourceLine" id="cb385-71" title="71"></a>
<a class="sourceLine" id="cb385-72" title="72"></a>
<a class="sourceLine" id="cb385-73" title="73">  <span class="co"># convert to PitchTier</span></a>
<a class="sourceLine" id="cb385-74" title="74">  PraatR<span class="op">::</span><span class="kw">praat</span>(<span class="st">&quot;Down to PitchTier&quot;</span>,</a>
<a class="sourceLine" id="cb385-75" title="75">                <span class="dt">input =</span> tmp2FilePath,</a>
<a class="sourceLine" id="cb385-76" title="76">                <span class="dt">output =</span> tmp3FilePath,</a>
<a class="sourceLine" id="cb385-77" title="77">                <span class="dt">overwrite =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb385-78" title="78"></a>
<a class="sourceLine" id="cb385-79" title="79">  <span class="co"># Down to TableOfReal: &quot;Hertz&quot;</span></a>
<a class="sourceLine" id="cb385-80" title="80">  PraatR<span class="op">::</span><span class="kw">praat</span>(<span class="st">&quot;Down to TableOfReal...&quot;</span>,</a>
<a class="sourceLine" id="cb385-81" title="81">                <span class="dt">input =</span> tmp3FilePath,</a>
<a class="sourceLine" id="cb385-82" title="82">                <span class="dt">output =</span> tmp4FilePath,</a>
<a class="sourceLine" id="cb385-83" title="83">                <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="st">&quot;Hertz&quot;</span>),</a>
<a class="sourceLine" id="cb385-84" title="84">                <span class="dt">filetype =</span> <span class="st">&quot;headerless spreadsheet&quot;</span>,</a>
<a class="sourceLine" id="cb385-85" title="85">                <span class="dt">overwrite =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb385-86" title="86"></a>
<a class="sourceLine" id="cb385-87" title="87">  <span class="co"># create empty df that holds all time steps</span></a>
<a class="sourceLine" id="cb385-88" title="88">  df =<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Time =</span> <span class="kw">seq</span>(start, end, <span class="dt">by =</span> timestep), <span class="dt">F0 =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb385-89" title="89">  <span class="co"># get vals</span></a>
<a class="sourceLine" id="cb385-90" title="90">  df_tmp =<span class="st"> </span><span class="kw">read.csv</span>(tmp4FilePath, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>, <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>)[,<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb385-91" title="91">  <span class="co"># and fill up empty df (ensures every timestep has a value)</span></a>
<a class="sourceLine" id="cb385-92" title="92">  df<span class="op">$</span>F0[df<span class="op">$</span>Time <span class="op">%in%</span><span class="st"> </span>df_tmp<span class="op">$</span>Time] =<span class="st"> </span>df_tmp<span class="op">$</span>F0</a>
<a class="sourceLine" id="cb385-93" title="93">  df</a>
<a class="sourceLine" id="cb385-94" title="94"></a>
<a class="sourceLine" id="cb385-95" title="95">  <span class="co"># create AsspDataObj</span></a>
<a class="sourceLine" id="cb385-96" title="96">  ado =<span class="st"> </span><span class="kw">list</span>()</a>
<a class="sourceLine" id="cb385-97" title="97"></a>
<a class="sourceLine" id="cb385-98" title="98">  <span class="kw">attr</span>(ado, <span class="st">&quot;trackFormats&quot;</span>) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;INT16&quot;</span>)</a>
<a class="sourceLine" id="cb385-99" title="99">  <span class="kw">attr</span>(ado, <span class="st">&quot;sampleRate&quot;</span>) =<span class="st"> </span>sR</a>
<a class="sourceLine" id="cb385-100" title="100"></a>
<a class="sourceLine" id="cb385-101" title="101">  tmpObj =<span class="st"> </span>wrassp<span class="op">::</span><span class="kw">read.AsspDataObj</span>(path)</a>
<a class="sourceLine" id="cb385-102" title="102">  <span class="kw">attr</span>(ado, <span class="st">&quot;origFreq&quot;</span>) =<span class="st"> </span><span class="kw">attr</span>(tmpObj, <span class="st">&quot;sampleRate&quot;</span>)</a>
<a class="sourceLine" id="cb385-103" title="103"></a>
<a class="sourceLine" id="cb385-104" title="104">  <span class="kw">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>) =<span class="st"> </span>start</a>
<a class="sourceLine" id="cb385-105" title="105">  <span class="kw">attr</span>(ado, <span class="st">&quot;endRecord&quot;</span>) =<span class="st"> </span><span class="kw">as.integer</span>(nframes)</a>
<a class="sourceLine" id="cb385-106" title="106"></a>
<a class="sourceLine" id="cb385-107" title="107">  <span class="kw">class</span>(ado) =<span class="st"> &quot;AsspDataObj&quot;</span></a>
<a class="sourceLine" id="cb385-108" title="108"></a>
<a class="sourceLine" id="cb385-109" title="109">  wrassp<span class="op">::</span><span class="kw">AsspFileFormat</span>(ado) &lt;-<span class="st"> &quot;SSFF&quot;</span></a>
<a class="sourceLine" id="cb385-110" title="110">  wrassp<span class="op">::</span><span class="kw">AsspDataFormat</span>(ado) &lt;-<span class="st"> </span><span class="kw">as.integer</span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb385-111" title="111">  f0Vals =<span class="st"> </span><span class="kw">as.integer</span>(df[,<span class="st">&quot;F0&quot;</span>])</a>
<a class="sourceLine" id="cb385-112" title="112">  ado =<span class="st"> </span>wrassp<span class="op">::</span><span class="kw">addTrack</span>(ado, <span class="st">&quot;f0&quot;</span>, f0Vals, <span class="st">&quot;INT16&quot;</span>)</a>
<a class="sourceLine" id="cb385-113" title="113"></a>
<a class="sourceLine" id="cb385-114" title="114">  <span class="co"># prepend missing values as praat sometimes</span></a>
<a class="sourceLine" id="cb385-115" title="115">  <span class="co"># starts fairly late</span></a>
<a class="sourceLine" id="cb385-116" title="116">  <span class="cf">if</span>(start <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">/</span><span class="st"> </span>sR){</a>
<a class="sourceLine" id="cb385-117" title="117">    nr_of_missing_samples =<span class="st"> </span><span class="kw">floor</span>(start <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span><span class="op">/</span>sR))</a>
<a class="sourceLine" id="cb385-118" title="118"></a>
<a class="sourceLine" id="cb385-119" title="119">    missing_f0_vals =<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">0</span>,</a>
<a class="sourceLine" id="cb385-120" title="120">                             <span class="dt">nrow =</span> nr_of_missing_samples,</a>
<a class="sourceLine" id="cb385-121" title="121">                             <span class="dt">ncol =</span> <span class="kw">ncol</span>(ado<span class="op">$</span>f0))</a>
<a class="sourceLine" id="cb385-122" title="122"></a>
<a class="sourceLine" id="cb385-123" title="123">    <span class="co"># prepend values</span></a>
<a class="sourceLine" id="cb385-124" title="124">    ado<span class="op">$</span>f0 =<span class="st"> </span><span class="kw">rbind</span>(missing_f0_vals, ado<span class="op">$</span>f0)</a>
<a class="sourceLine" id="cb385-125" title="125"></a>
<a class="sourceLine" id="cb385-126" title="126">    <span class="co"># fix start time</span></a>
<a class="sourceLine" id="cb385-127" title="127">    <span class="kw">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>) =<span class="st"> </span>start <span class="op">-</span><span class="st"> </span>nr_of_missing_samples <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">/</span><span class="st"> </span>sR)</a>
<a class="sourceLine" id="cb385-128" title="128">    <span class="kw">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>) =<span class="st"> </span><span class="kw">round</span>(<span class="kw">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>), <span class="dv">6</span>)</a>
<a class="sourceLine" id="cb385-129" title="129">  }</a>
<a class="sourceLine" id="cb385-130" title="130">  <span class="kw">return</span>(ado)</a>
<a class="sourceLine" id="cb385-131" title="131">}</a></code></pre></div>
<p>How this function can be applied to wav files of an emuDB is shown below.</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb386-1" title="1"><span class="kw">library</span>(emuR)</a>
<a class="sourceLine" id="cb386-2" title="2"></a>
<a class="sourceLine" id="cb386-3" title="3"><span class="co"># create demo data in tempdir()</span></a>
<a class="sourceLine" id="cb386-4" title="4"><span class="kw">create_emuRdemoData</span>(<span class="kw">tempdir</span>())</a>
<a class="sourceLine" id="cb386-5" title="5"></a>
<a class="sourceLine" id="cb386-6" title="6"><span class="co"># create path to demo database</span></a>
<a class="sourceLine" id="cb386-7" title="7">path2ae =<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), <span class="st">&quot;emuR_demoData&quot;</span>, <span class="st">&quot;ae_emuDB&quot;</span>)</a>
<a class="sourceLine" id="cb386-8" title="8"></a>
<a class="sourceLine" id="cb386-9" title="9"><span class="co"># test the function of converting praat formant data to emuR</span></a>
<a class="sourceLine" id="cb386-10" title="10">paths2wavFiles =<span class="st"> </span><span class="kw">list.files</span>(path2ae,</a>
<a class="sourceLine" id="cb386-11" title="11">                            <span class="dt">pattern =</span> <span class="st">&quot;wav$&quot;</span>,</a>
<a class="sourceLine" id="cb386-12" title="12">                            <span class="dt">recursive =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb386-13" title="13">                            <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb386-14" title="14"></a>
<a class="sourceLine" id="cb386-15" title="15"><span class="co"># loop through files</span></a>
<a class="sourceLine" id="cb386-16" title="16"><span class="cf">for</span>(fp <span class="cf">in</span> paths2wavFiles){</a>
<a class="sourceLine" id="cb386-17" title="17">  ado =<span class="st"> </span><span class="kw">praatToPitch2AsspDataObj</span>(fp)</a>
<a class="sourceLine" id="cb386-18" title="18">  newPath =<span class="st"> </span><span class="kw">paste0</span>(tools<span class="op">::</span><span class="kw">file_path_sans_ext</span>(fp), <span class="st">&#39;.praatF0&#39;</span>)</a>
<a class="sourceLine" id="cb386-19" title="19">  <span class="co"># print(paste0(fp, &#39; -&gt; &#39;, newPath)) # uncomment for simple log</span></a>
<a class="sourceLine" id="cb386-20" title="20">  wrassp<span class="op">::</span><span class="kw">write.AsspDataObj</span>(ado, <span class="dt">file =</span> newPath)</a>
<a class="sourceLine" id="cb386-21" title="21">}</a>
<a class="sourceLine" id="cb386-22" title="22"></a>
<a class="sourceLine" id="cb386-23" title="23"><span class="co"># load emuDB</span></a>
<a class="sourceLine" id="cb386-24" title="24">ae =<span class="st"> </span><span class="kw">load_emuDB</span>(path2ae, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb386-25" title="25"></a>
<a class="sourceLine" id="cb386-26" title="26"><span class="co"># add SSFF track definition</span></a>
<a class="sourceLine" id="cb386-27" title="27"><span class="kw">add_ssffTrackDefinition</span>(ae,</a>
<a class="sourceLine" id="cb386-28" title="28">                        <span class="dt">name =</span> <span class="st">&quot;praatF0&quot;</span>,</a>
<a class="sourceLine" id="cb386-29" title="29">                        <span class="dt">columnName =</span> <span class="st">&quot;f0&quot;</span>,</a>
<a class="sourceLine" id="cb386-30" title="30">                        <span class="dt">fileExtension =</span> <span class="st">&quot;praatF0&quot;</span>)</a>
<a class="sourceLine" id="cb386-31" title="31"></a>
<a class="sourceLine" id="cb386-32" title="32"><span class="co"># test query + get_trackdata</span></a>
<a class="sourceLine" id="cb386-33" title="33">sl =<span class="st"> </span><span class="kw">query</span>(ae, <span class="st">&quot;Phonetic == n&quot;</span>)</a>
<a class="sourceLine" id="cb386-34" title="34"></a>
<a class="sourceLine" id="cb386-35" title="35">td =<span class="st"> </span><span class="kw">get_trackdata</span>(ae, sl, <span class="dt">ssffTrackName =</span> <span class="st">&quot;praatF0&quot;</span>, <span class="dt">verbose =</span> F)</a>
<a class="sourceLine" id="cb386-36" title="36"></a>
<a class="sourceLine" id="cb386-37" title="37"><span class="co"># configure EMU-webApp to show new track</span></a>
<a class="sourceLine" id="cb386-38" title="38">sc_order =<span class="st"> </span><span class="kw">get_signalCanvasesOrder</span>(ae, <span class="st">&quot;default&quot;</span>)</a>
<a class="sourceLine" id="cb386-39" title="39"></a>
<a class="sourceLine" id="cb386-40" title="40"><span class="kw">set_signalCanvasesOrder</span>(ae, <span class="st">&quot;default&quot;</span>, <span class="kw">c</span>(sc_order, <span class="st">&quot;praatF0&quot;</span>))</a>
<a class="sourceLine" id="cb386-41" title="41"></a>
<a class="sourceLine" id="cb386-42" title="42"><span class="co"># serve(ae) # uncomment to view in EMU-webApp</span></a></code></pre></div>
</div>
</div>
<div id="sec:app-chap-wrassp-opensmileSigProc" class="section level2">
<h2><span class="header-section-number">19.2</span> Using OpenSMILE signal processing routines in the EMU-SDMS</h2>
<p>NOTE: this function can be accessed directly as follows: <code>source("https://raw.githubusercontent.com/IPS-LMU/The-EMU-SDMS-Manual/master/R/SMILExtract2AsspDataObj.R")</code></p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb387-1" title="1"><span class="co">##&#39; convert CSV output of SMILExtract to AsspDataObject</span></a>
<a class="sourceLine" id="cb387-2" title="2"><span class="co">##&#39; @param path path to wav file</span></a>
<a class="sourceLine" id="cb387-3" title="3"><span class="co">##&#39; @param SMILExtractPath path to SMILExtract executable</span></a>
<a class="sourceLine" id="cb387-4" title="4"><span class="co">##&#39; @param configPath path to openSMILE config file</span></a>
<a class="sourceLine" id="cb387-5" title="5"><span class="co">##&#39; @param columsAsTracks if TRUE -&gt; every column will be placed in it&#39;s own track</span></a>
<a class="sourceLine" id="cb387-6" title="6"><span class="co">##&#39; if FALSE -&gt; every column is placed into a single track called SMILExtractAll</span></a>
<a class="sourceLine" id="cb387-7" title="7">SMILExtract2AsspDataObj &lt;-<span class="st"> </span><span class="cf">function</span>(path,</a>
<a class="sourceLine" id="cb387-8" title="8">                                    SMILExtractPath,</a>
<a class="sourceLine" id="cb387-9" title="9">                                    configPath,</a>
<a class="sourceLine" id="cb387-10" title="10">                                    <span class="dt">columsAsTracks =</span> <span class="ot">TRUE</span>){</a>
<a class="sourceLine" id="cb387-11" title="11"></a>
<a class="sourceLine" id="cb387-12" title="12">  tmp1FileName =<span class="st"> &quot;tmp.csv&quot;</span></a>
<a class="sourceLine" id="cb387-13" title="13"></a>
<a class="sourceLine" id="cb387-14" title="14">  tmp1FilePath =<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp1FileName)</a>
<a class="sourceLine" id="cb387-15" title="15"></a>
<a class="sourceLine" id="cb387-16" title="16">  <span class="co"># remove tmp file if it already exists</span></a>
<a class="sourceLine" id="cb387-17" title="17">  <span class="kw">unlink</span>(<span class="kw">file.path</span>(<span class="kw">tempdir</span>(), tmp1FileName))</a>
<a class="sourceLine" id="cb387-18" title="18"></a>
<a class="sourceLine" id="cb387-19" title="19">  <span class="kw">system</span>(<span class="kw">paste0</span>(SMILExtractPath,</a>
<a class="sourceLine" id="cb387-20" title="20">                <span class="st">&quot; -C &quot;</span>, configPath,</a>
<a class="sourceLine" id="cb387-21" title="21">                <span class="st">&quot; -I &quot;</span>, path,</a>
<a class="sourceLine" id="cb387-22" title="22">                <span class="st">&quot; -O &quot;</span>, tmp1FilePath),</a>
<a class="sourceLine" id="cb387-23" title="23">         <span class="dt">ignore.stdout =</span> T,</a>
<a class="sourceLine" id="cb387-24" title="24">         <span class="dt">ignore.stderr =</span> T)</a>
<a class="sourceLine" id="cb387-25" title="25"></a>
<a class="sourceLine" id="cb387-26" title="26">  <span class="co"># get vals</span></a>
<a class="sourceLine" id="cb387-27" title="27">  df =<span class="st"> </span><span class="kw">suppressMessages</span>(readr<span class="op">::</span><span class="kw">read_delim</span>(tmp1FilePath,</a>
<a class="sourceLine" id="cb387-28" title="28">                                          <span class="dt">delim =</span> <span class="st">&quot;;&quot;</span>))</a>
<a class="sourceLine" id="cb387-29" title="29"></a>
<a class="sourceLine" id="cb387-30" title="30">  <span class="co"># extract + remove frameIndex/frameTime</span></a>
<a class="sourceLine" id="cb387-31" title="31">  frameIndex =<span class="st"> </span>df<span class="op">$</span>frameIndex</a>
<a class="sourceLine" id="cb387-32" title="32">  frameTime =<span class="st"> </span>df<span class="op">$</span>frameTime</a>
<a class="sourceLine" id="cb387-33" title="33"></a>
<a class="sourceLine" id="cb387-34" title="34">  df<span class="op">$</span>frameIndex =<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb387-35" title="35">  df<span class="op">$</span>frameTime =<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb387-36" title="36"></a>
<a class="sourceLine" id="cb387-37" title="37">  df =<span class="st"> </span><span class="kw">as.matrix</span>(df)</a>
<a class="sourceLine" id="cb387-38" title="38"></a>
<a class="sourceLine" id="cb387-39" title="39">  colNames =<span class="st"> </span><span class="kw">colnames</span>(df)</a>
<a class="sourceLine" id="cb387-40" title="40"></a>
<a class="sourceLine" id="cb387-41" title="41">  <span class="co"># get start time</span></a>
<a class="sourceLine" id="cb387-42" title="42">  startTime =<span class="st"> </span>frameTime[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb387-43" title="43"></a>
<a class="sourceLine" id="cb387-44" title="44">  <span class="co"># create AsspDataObj</span></a>
<a class="sourceLine" id="cb387-45" title="45">  ado =<span class="st"> </span><span class="kw">list</span>()</a>
<a class="sourceLine" id="cb387-46" title="46"></a>
<a class="sourceLine" id="cb387-47" title="47">  <span class="kw">attr</span>(ado, <span class="st">&quot;sampleRate&quot;</span>) =<span class="st"> </span><span class="dv">1</span><span class="op">/</span>frameTime[<span class="dv">2</span>] <span class="co"># second frameTime should be stepsize</span></a>
<a class="sourceLine" id="cb387-48" title="48"></a>
<a class="sourceLine" id="cb387-49" title="49">  tmpObj =<span class="st"> </span>wrassp<span class="op">::</span><span class="kw">read.AsspDataObj</span>(path)</a>
<a class="sourceLine" id="cb387-50" title="50">  <span class="kw">attr</span>(ado, <span class="st">&quot;origFreq&quot;</span>) =<span class="st"> </span><span class="kw">attr</span>(tmpObj, <span class="st">&quot;sampleRate&quot;</span>)</a>
<a class="sourceLine" id="cb387-51" title="51"></a>
<a class="sourceLine" id="cb387-52" title="52">  <span class="kw">attr</span>(ado, <span class="st">&quot;startTime&quot;</span>) =<span class="st"> </span>startTime</a>
<a class="sourceLine" id="cb387-53" title="53"></a>
<a class="sourceLine" id="cb387-54" title="54">  <span class="co"># attr(ado, &quot;startRecord&quot;) = as.integer(1)</span></a>
<a class="sourceLine" id="cb387-55" title="55"></a>
<a class="sourceLine" id="cb387-56" title="56">  <span class="kw">attr</span>(ado, <span class="st">&quot;endRecord&quot;</span>) =<span class="st"> </span><span class="kw">as.integer</span>(<span class="kw">nrow</span>(df))</a>
<a class="sourceLine" id="cb387-57" title="57"></a>
<a class="sourceLine" id="cb387-58" title="58">  <span class="kw">class</span>(ado) =<span class="st"> &quot;AsspDataObj&quot;</span></a>
<a class="sourceLine" id="cb387-59" title="59"></a>
<a class="sourceLine" id="cb387-60" title="60">  wrassp<span class="op">::</span><span class="kw">AsspFileFormat</span>(ado) &lt;-<span class="st"> &quot;SSFF&quot;</span></a>
<a class="sourceLine" id="cb387-61" title="61">  wrassp<span class="op">::</span><span class="kw">AsspDataFormat</span>(ado) &lt;-<span class="st"> </span><span class="kw">as.integer</span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb387-62" title="62"></a>
<a class="sourceLine" id="cb387-63" title="63">  <span class="co"># add every column as new track</span></a>
<a class="sourceLine" id="cb387-64" title="64">  <span class="cf">if</span>(columsAsTracks){</a>
<a class="sourceLine" id="cb387-65" title="65">    <span class="kw">attr</span>(ado, <span class="st">&quot;trackFormats&quot;</span>) =<span class="st"> </span><span class="kw">rep</span>(<span class="st">&quot;REAL32&quot;</span>, <span class="kw">ncol</span>(df))</a>
<a class="sourceLine" id="cb387-66" title="66">    <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(df)){</a>
<a class="sourceLine" id="cb387-67" title="67">      ado =<span class="st"> </span>wrassp<span class="op">::</span><span class="kw">addTrack</span>(ado,</a>
<a class="sourceLine" id="cb387-68" title="68">                             <span class="dt">trackname =</span> colNames[i],</a>
<a class="sourceLine" id="cb387-69" title="69">                             <span class="dt">data =</span> df[,i],</a>
<a class="sourceLine" id="cb387-70" title="70">                             <span class="dt">format =</span> <span class="st">&quot;REAL32&quot;</span>)</a>
<a class="sourceLine" id="cb387-71" title="71">    }</a>
<a class="sourceLine" id="cb387-72" title="72">  }<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb387-73" title="73">    <span class="kw">attr</span>(ado, <span class="st">&quot;trackFormats&quot;</span>) =<span class="st"> &quot;REAL32&quot;</span></a>
<a class="sourceLine" id="cb387-74" title="74">    ado =<span class="st"> </span>wrassp<span class="op">::</span><span class="kw">addTrack</span>(ado,</a>
<a class="sourceLine" id="cb387-75" title="75">                           <span class="dt">trackname =</span> <span class="st">&quot;SMILExtractAll&quot;</span>,</a>
<a class="sourceLine" id="cb387-76" title="76">                           <span class="dt">data =</span> df,</a>
<a class="sourceLine" id="cb387-77" title="77">                           <span class="dt">format =</span> <span class="st">&quot;REAL32&quot;</span>)</a>
<a class="sourceLine" id="cb387-78" title="78"></a>
<a class="sourceLine" id="cb387-79" title="79">  }</a>
<a class="sourceLine" id="cb387-80" title="80"></a>
<a class="sourceLine" id="cb387-81" title="81">  <span class="kw">return</span>(ado)</a>
<a class="sourceLine" id="cb387-82" title="82">}</a></code></pre></div>
<p>How this function can be applied to wav files of an emuDB is shown below.</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb388-1" title="1"><span class="kw">library</span>(emuR)</a>
<a class="sourceLine" id="cb388-2" title="2"></a>
<a class="sourceLine" id="cb388-3" title="3"><span class="co"># create demo data in tempdir()</span></a>
<a class="sourceLine" id="cb388-4" title="4"><span class="kw">create_emuRdemoData</span>(<span class="kw">tempdir</span>())</a>
<a class="sourceLine" id="cb388-5" title="5"></a>
<a class="sourceLine" id="cb388-6" title="6"><span class="co"># create path to demo database</span></a>
<a class="sourceLine" id="cb388-7" title="7">path2ae =<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), <span class="st">&quot;emuR_demoData&quot;</span>, <span class="st">&quot;ae_emuDB&quot;</span>)</a>
<a class="sourceLine" id="cb388-8" title="8"></a>
<a class="sourceLine" id="cb388-9" title="9"><span class="co"># list all .wav files in the ae emuDB</span></a>
<a class="sourceLine" id="cb388-10" title="10">paths2wavFiles =<span class="st"> </span><span class="kw">list.files</span>(path2ae,</a>
<a class="sourceLine" id="cb388-11" title="11">                            <span class="dt">pattern =</span> <span class="st">&quot;*.wav$&quot;</span>,</a>
<a class="sourceLine" id="cb388-12" title="12">                            <span class="dt">recursive =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb388-13" title="13">                            <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb388-14" title="14"></a>
<a class="sourceLine" id="cb388-15" title="15"><span class="co"># loop through files</span></a>
<a class="sourceLine" id="cb388-16" title="16"><span class="cf">for</span>(fp <span class="cf">in</span> paths2wavFiles){</a>
<a class="sourceLine" id="cb388-17" title="17">  ado =<span class="st"> </span><span class="kw">SMILExtract2AsspDataObj</span>(fp,</a>
<a class="sourceLine" id="cb388-18" title="18">                                <span class="dt">SMILExtractPath =</span> <span class="st">&quot;~/programs/opensmile-2.3.0/bin/SMILExtract&quot;</span>,</a>
<a class="sourceLine" id="cb388-19" title="19">                                <span class="dt">configPath =</span> <span class="st">&quot;~/programs/opensmile-2.3.0/config/demo/demo1_energy.conf&quot;</span>)</a>
<a class="sourceLine" id="cb388-20" title="20">  newPath =<span class="st"> </span><span class="kw">paste0</span>(<span class="kw">file_path_sans_ext</span>(fp), <span class="st">&#39;.SMILExtract&#39;</span>)</a>
<a class="sourceLine" id="cb388-21" title="21">  <span class="co"># print(paste0(fp, &#39; -&gt; &#39;, newPath)) # uncomment for simple log</span></a>
<a class="sourceLine" id="cb388-22" title="22">  <span class="kw">write.AsspDataObj</span>(ado, <span class="dt">file =</span> newPath)</a>
<a class="sourceLine" id="cb388-23" title="23">}</a>
<a class="sourceLine" id="cb388-24" title="24"></a>
<a class="sourceLine" id="cb388-25" title="25"><span class="co"># load emuDB</span></a>
<a class="sourceLine" id="cb388-26" title="26">ae =<span class="st"> </span><span class="kw">load_emuDB</span>(path2ae, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb388-27" title="27"></a>
<a class="sourceLine" id="cb388-28" title="28"><span class="co"># add SSFF track definition</span></a>
<a class="sourceLine" id="cb388-29" title="29"><span class="kw">add_ssffTrackDefinition</span>(ae,</a>
<a class="sourceLine" id="cb388-30" title="30">                        <span class="dt">name =</span> <span class="st">&quot;SMILExtract&quot;</span>,</a>
<a class="sourceLine" id="cb388-31" title="31">                        <span class="dt">columnName =</span> <span class="st">&quot;pcm_LOGenergy&quot;</span>,</a>
<a class="sourceLine" id="cb388-32" title="32">                        <span class="dt">fileExtension =</span> <span class="st">&quot;SMILExtract&quot;</span>)</a>
<a class="sourceLine" id="cb388-33" title="33"></a>
<a class="sourceLine" id="cb388-34" title="34"><span class="co"># test query + get_trackdata</span></a>
<a class="sourceLine" id="cb388-35" title="35">sl =<span class="st"> </span><span class="kw">query</span>(ae, <span class="st">&quot;Phonetic == n&quot;</span>)</a>
<a class="sourceLine" id="cb388-36" title="36"></a>
<a class="sourceLine" id="cb388-37" title="37">td =<span class="st"> </span><span class="kw">get_trackdata</span>(ae,</a>
<a class="sourceLine" id="cb388-38" title="38">                   sl,</a>
<a class="sourceLine" id="cb388-39" title="39">                   <span class="dt">ssffTrackName =</span> <span class="st">&quot;SMILExtract&quot;</span>,</a>
<a class="sourceLine" id="cb388-40" title="40">                   <span class="dt">verbose =</span> F)</a>
<a class="sourceLine" id="cb388-41" title="41"></a>
<a class="sourceLine" id="cb388-42" title="42"><span class="co"># test display</span></a>
<a class="sourceLine" id="cb388-43" title="43"><span class="kw">set_signalCanvasesOrder</span>(ae,</a>
<a class="sourceLine" id="cb388-44" title="44">                        <span class="dt">perspectiveName =</span> <span class="st">&quot;default&quot;</span>,</a>
<a class="sourceLine" id="cb388-45" title="45">                        <span class="dt">order =</span> <span class="kw">c</span>(<span class="st">&quot;OSCI&quot;</span>, <span class="st">&quot;SPEC&quot;</span>, <span class="st">&quot;SMILExtract&quot;</span>))</a>
<a class="sourceLine" id="cb388-46" title="46"></a>
<a class="sourceLine" id="cb388-47" title="47"><span class="co"># serve(ae) # uncomment to view in EMU-webApp</span></a></code></pre></div>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="app-chap-eql.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="about.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/IPS-LMU/The-EMU-SDMS-Manual/edit/master/app_chap-wrassp.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
