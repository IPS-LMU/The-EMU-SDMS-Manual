<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>The EMU-SDMS Manual</title>
  <meta name="description" content="The EMU-SDMS Manual">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="The EMU-SDMS Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ips-lmu.github.io/The-EMU-SDMS-Manual/" />
  
  <meta property="og:description" content="The EMU-SDMS Manual" />
  <meta name="github-repo" content="IPS-LMU/The-EMU-SDMS-Manual" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The EMU-SDMS Manual" />
  
  <meta name="twitter:description" content="The EMU-SDMS Manual" />
  

<meta name="author" content="Raphael Winkelmann">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="chap-emuRpackageDetails.html">
<link rel="next" href="references.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The EMU-SDMS Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="installing-the-emu-sdms.html"><a href="installing-the-emu-sdms.html"><i class="fa fa-check"></i><b>1</b> Installing the EMU-SDMS</a><ul>
<li class="chapter" data-level="1.1" data-path="installing-the-emu-sdms.html"><a href="installing-the-emu-sdms.html#version-disclaimer"><i class="fa fa-check"></i><b>1.1</b> Version disclaimer</a></li>
<li class="chapter" data-level="1.2" data-path="installing-the-emu-sdms.html"><a href="installing-the-emu-sdms.html#for-developers-and-people-interested-in-the-source-code"><i class="fa fa-check"></i><b>1.2</b> For developers and people interested in the source code</a></li>
</ul></li>
<li class="part"><span><b>I Overview and tutorial</b></span></li>
<li class="chapter" data-level="2" data-path="chap-overview.html"><a href="chap-overview.html"><i class="fa fa-check"></i><b>2</b> An overview of the EMU-SDMS</a><ul>
<li class="chapter" data-level="2.1" data-path="chap-overview.html"><a href="chap-overview.html#the-evolution-of-the-emu-sdms"><i class="fa fa-check"></i><b>2.1</b> The evolution of the EMU-SDMS</a></li>
<li class="chapter" data-level="2.2" data-path="chap-overview.html"><a href="chap-overview.html#sec:overview-sysArch"><i class="fa fa-check"></i><b>2.2</b> EMU-SDMS: System architecture and default workflow</a></li>
<li class="chapter" data-level="2.3" data-path="chap-overview.html"><a href="chap-overview.html#emu-sdms-is-it-something-for-you"><i class="fa fa-check"></i><b>2.3</b> EMU-SDMS: Is it something for you?</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chap-tutorial.html"><a href="chap-tutorial.html"><i class="fa fa-check"></i><b>3</b> A tutorial on how to use the EMU-SDMS</a><ul>
<li class="chapter" data-level="3.1" data-path="chap-tutorial.html"><a href="chap-tutorial.html#converting-the-textgrid-collection"><i class="fa fa-check"></i><b>3.1</b> Converting the TextGrid collection</a></li>
<li class="chapter" data-level="3.2" data-path="chap-tutorial.html"><a href="chap-tutorial.html#loading-and-inspecting-the-database"><i class="fa fa-check"></i><b>3.2</b> Loading and inspecting the database</a><ul>
<li class="chapter" data-level="3.2.1" data-path="chap-tutorial.html"><a href="chap-tutorial.html#overview"><i class="fa fa-check"></i><b>3.2.1</b> Overview</a></li>
<li class="chapter" data-level="3.2.2" data-path="chap-tutorial.html"><a href="chap-tutorial.html#database-annotation-and-visual-inspection"><i class="fa fa-check"></i><b>3.2.2</b> Database annotation and visual inspection</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="chap-tutorial.html"><a href="chap-tutorial.html#querying-and-autobuilding-the-annotation-structure"><i class="fa fa-check"></i><b>3.3</b> Querying and autobuilding the annotation structure</a></li>
<li class="chapter" data-level="3.4" data-path="chap-tutorial.html"><a href="chap-tutorial.html#autobuilding"><i class="fa fa-check"></i><b>3.4</b> Autobuilding</a><ul>
<li class="chapter" data-level="3.4.1" data-path="chap-tutorial.html"><a href="chap-tutorial.html#querying-the-hierarchical-annotations"><i class="fa fa-check"></i><b>3.4.1</b> Querying the hierarchical annotations</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="chap-tutorial.html"><a href="chap-tutorial.html#section:tutorial-sigExtrAndExpl"><i class="fa fa-check"></i><b>3.5</b> Signal extraction and exploration</a></li>
<li class="chapter" data-level="3.6" data-path="chap-tutorial.html"><a href="chap-tutorial.html#vowel-height-as-a-function-of-word-types-content-vs.function-evaluation-and-statistical-analysis"><i class="fa fa-check"></i><b>3.6</b> Vowel height as a function of word types (content vs. function): evaluation and statistical analysis</a></li>
<li class="chapter" data-level="3.7" data-path="chap-tutorial.html"><a href="chap-tutorial.html#conclusion"><i class="fa fa-check"></i><b>3.7</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>II Main components and concepts</b></span></li>
<li class="chapter" data-level="4" data-path="chap-annot-struct-mod.html"><a href="chap-annot-struct-mod.html"><i class="fa fa-check"></i><b>4</b> Annotation Structure Modeling</a><ul>
<li class="chapter" data-level="4.1" data-path="chap-annot-struct-mod.html"><a href="chap-annot-struct-mod.html#per-database-annotation-structure-definition"><i class="fa fa-check"></i><b>4.1</b> Per database annotation structure definition</a></li>
<li class="chapter" data-level="4.2" data-path="chap-annot-struct-mod.html"><a href="chap-annot-struct-mod.html#parallel-labels-and-multiple-attributes"><i class="fa fa-check"></i><b>4.2</b> Parallel labels and multiple attributes</a></li>
<li class="chapter" data-level="4.3" data-path="chap-annot-struct-mod.html"><a href="chap-annot-struct-mod.html#metadata-strategy-using-single-bundle-root-nodes"><i class="fa fa-check"></i><b>4.3</b> Metadata strategy using single bundle root nodes</a></li>
<li class="chapter" data-level="4.4" data-path="chap-annot-struct-mod.html"><a href="chap-annot-struct-mod.html#conclusion-1"><i class="fa fa-check"></i><b>4.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chap-emuDB.html"><a href="chap-emuDB.html"><i class="fa fa-check"></i><b>5</b> The <code>emuDB</code> Format</a><ul>
<li class="chapter" data-level="5.1" data-path="chap-emuDB.html"><a href="chap-emuDB.html#database-design"><i class="fa fa-check"></i><b>5.1</b> Database design</a></li>
<li class="chapter" data-level="5.2" data-path="chap-emuDB.html"><a href="chap-emuDB.html#creating-an-emudb"><i class="fa fa-check"></i><b>5.2</b> Creating an <code>emuDB</code></a><ul>
<li class="chapter" data-level="5.2.1" data-path="chap-emuDB.html"><a href="chap-emuDB.html#creating-an-emudb-from-scratch"><i class="fa fa-check"></i><b>5.2.1</b> Creating an <code>emuDB</code> from scratch</a></li>
<li class="chapter" data-level="5.2.2" data-path="chap-emuDB.html"><a href="chap-emuDB.html#loading-and-editing-an-empty-database"><i class="fa fa-check"></i><b>5.2.2</b> Loading and editing an empty database</a></li>
<li class="chapter" data-level="5.2.3" data-path="chap-emuDB.html"><a href="chap-emuDB.html#level-definitions"><i class="fa fa-check"></i><b>5.2.3</b> Level definitions</a></li>
<li class="chapter" data-level="5.2.4" data-path="chap-emuDB.html"><a href="chap-emuDB.html#link-definitions"><i class="fa fa-check"></i><b>5.2.4</b> Link definitions</a></li>
<li class="chapter" data-level="5.2.5" data-path="chap-emuDB.html"><a href="chap-emuDB.html#file-handling"><i class="fa fa-check"></i><b>5.2.5</b> File handling</a></li>
<li class="chapter" data-level="5.2.6" data-path="chap-emuDB.html"><a href="chap-emuDB.html#ssff-track-definitions"><i class="fa fa-check"></i><b>5.2.6</b> SSFF track definitions</a></li>
<li class="chapter" data-level="5.2.7" data-path="chap-emuDB.html"><a href="chap-emuDB.html#configuring-the-emu-webapp-and-annotating-the-emudb"><i class="fa fa-check"></i><b>5.2.7</b> Configuring the <code>EMU-webApp</code> and annotating the <code>emuDB</code></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="chap-emuDB.html"><a href="chap-emuDB.html#conclusion-2"><i class="fa fa-check"></i><b>5.3</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chap-querysys.html"><a href="chap-querysys.html"><i class="fa fa-check"></i><b>6</b> The query system</a><ul>
<li class="chapter" data-level="6.1" data-path="chap-querysys.html"><a href="chap-querysys.html#sec:query_emuRsegs"><i class="fa fa-check"></i><b>6.1</b> <code>emuRsegs</code>: The resulting object of a query</a></li>
<li class="chapter" data-level="6.2" data-path="chap-querysys.html"><a href="chap-querysys.html#eql-the-emu-query-language-version-2"><i class="fa fa-check"></i><b>6.2</b> <code>EQL</code>: The EMU Query Language version 2</a><ul>
<li class="chapter" data-level="6.2.1" data-path="chap-querysys.html"><a href="chap-querysys.html#simple-queries"><i class="fa fa-check"></i><b>6.2.1</b> Simple queries</a></li>
<li class="chapter" data-level="6.2.2" data-path="chap-querysys.html"><a href="chap-querysys.html#combining-simple-queries"><i class="fa fa-check"></i><b>6.2.2</b> Combining simple queries</a></li>
<li class="chapter" data-level="6.2.3" data-path="chap-querysys.html"><a href="chap-querysys.html#subsec:query_positionQueries"><i class="fa fa-check"></i><b>6.2.3</b> Position queries</a></li>
<li class="chapter" data-level="6.2.4" data-path="chap-querysys.html"><a href="chap-querysys.html#subsec:query_countQueries"><i class="fa fa-check"></i><b>6.2.4</b> Count queries</a></li>
<li class="chapter" data-level="6.2.5" data-path="chap-querysys.html"><a href="chap-querysys.html#subsec:query_moreComplexQueries"><i class="fa fa-check"></i><b>6.2.5</b> More complex queries</a></li>
<li class="chapter" data-level="6.2.6" data-path="chap-querysys.html"><a href="chap-querysys.html#subsec:query_deducingTime"><i class="fa fa-check"></i><b>6.2.6</b> Deducing time</a></li>
<li class="chapter" data-level="6.2.7" data-path="chap-querysys.html"><a href="chap-querysys.html#subsec:requery"><i class="fa fa-check"></i><b>6.2.7</b> Requery</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="chap-querysys.html"><a href="chap-querysys.html#discussion"><i class="fa fa-check"></i><b>6.3</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chap-sigDataExtr.html"><a href="chap-sigDataExtr.html"><i class="fa fa-check"></i><b>7</b> Signal data extraction</a><ul>
<li class="chapter" data-level="7.1" data-path="chap-sigDataExtr.html"><a href="chap-sigDataExtr.html#extracting-pre-defined-tracks"><i class="fa fa-check"></i><b>7.1</b> Extracting pre-defined tracks</a></li>
<li class="chapter" data-level="7.2" data-path="chap-sigDataExtr.html"><a href="chap-sigDataExtr.html#adding-new-tracks"><i class="fa fa-check"></i><b>7.2</b> Adding new tracks</a></li>
<li class="chapter" data-level="7.3" data-path="chap-sigDataExtr.html"><a href="chap-sigDataExtr.html#calculating-tracks-on-the-fly"><i class="fa fa-check"></i><b>7.3</b> Calculating tracks on-the-fly</a></li>
<li class="chapter" data-level="7.4" data-path="chap-sigDataExtr.html"><a href="chap-sigDataExtr.html#the-resulting-object-trackdata-vs.-emurtrackdata"><i class="fa fa-check"></i><b>7.4</b> The resulting object: <code>trackdata</code> vs. <code>emuRtrackdata</code></a></li>
<li class="chapter" data-level="7.5" data-path="chap-sigDataExtr.html"><a href="chap-sigDataExtr.html#conclusion-3"><i class="fa fa-check"></i><b>7.5</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chap-wrassp.html"><a href="chap-wrassp.html"><i class="fa fa-check"></i><b>8</b> The R package <code>wrassp</code></a><ul>
<li class="chapter" data-level="8.1" data-path="chap-wrassp.html"><a href="chap-wrassp.html#introduction"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="chap-wrassp.html"><a href="chap-wrassp.html#file-i0-and-the-asspdataobj"><i class="fa fa-check"></i><b>8.2</b> File I/0 and the <code>AsspDataObj</code></a></li>
<li class="chapter" data-level="8.3" data-path="chap-wrassp.html"><a href="chap-wrassp.html#signal-processing"><i class="fa fa-check"></i><b>8.3</b> Signal processing</a></li>
<li class="chapter" data-level="8.4" data-path="chap-wrassp.html"><a href="chap-wrassp.html#subsec:wrassp-wrasspOutputInfos"><i class="fa fa-check"></i><b>8.4</b> The <code>wrasspOutputInfos</code> object</a></li>
<li class="chapter" data-level="8.5" data-path="chap-wrassp.html"><a href="chap-wrassp.html#subsec:wrassp-formants"><i class="fa fa-check"></i><b>8.5</b> Formants and their bandwidths</a><ul>
<li class="chapter" data-level="8.5.1" data-path="chap-wrassp.html"><a href="chap-wrassp.html#subsec:wrassp_f0"><i class="fa fa-check"></i><b>8.5.1</b> Fundamental frequency contour</a></li>
<li class="chapter" data-level="8.5.2" data-path="chap-wrassp.html"><a href="chap-wrassp.html#subsec:wrassp-RMS"><i class="fa fa-check"></i><b>8.5.2</b> RMS energy contour</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="chap-wrassp.html"><a href="chap-wrassp.html#sec:wrassp_logging"><i class="fa fa-check"></i><b>8.6</b> Logging <code>wrassp</code>’s function calls</a></li>
<li class="chapter" data-level="8.7" data-path="chap-wrassp.html"><a href="chap-wrassp.html#sec:wrassp_emu-sdms"><i class="fa fa-check"></i><b>8.7</b> Using <code>wrassp</code> in the EMU-SDMS</a></li>
<li class="chapter" data-level="8.8" data-path="chap-wrassp.html"><a href="chap-wrassp.html#sec:wrassp_genSSFF"><i class="fa fa-check"></i><b>8.8</b> Storing data in the SSFF file format</a></li>
<li class="chapter" data-level="8.9" data-path="chap-wrassp.html"><a href="chap-wrassp.html#conclusion-4"><i class="fa fa-check"></i><b>8.9</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html"><i class="fa fa-check"></i><b>9</b> The <code>EMU-webApp</code></a><ul>
<li class="chapter" data-level="9.1" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#sec:emu-webApp-mainLayout"><i class="fa fa-check"></i><b>9.1</b> Main layout</a></li>
<li class="chapter" data-level="9.2" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#sec:webApp-generalUsage"><i class="fa fa-check"></i><b>9.2</b> General usage</a><ul>
<li class="chapter" data-level="9.2.1" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#annotating-levels-containing-time-information"><i class="fa fa-check"></i><b>9.2.1</b> Annotating levels containing time information</a></li>
<li class="chapter" data-level="9.2.2" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#working-with-hierarchical-annotations-2-chapemu-webapp"><i class="fa fa-check"></i><b>9.2.2</b> Working with hierarchical annotations</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#configuring-the-emu-webapp"><i class="fa fa-check"></i><b>9.3</b> Configuring the <code>EMU-webApp</code></a><ul>
<li class="chapter" data-level="9.3.1" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#subsec:emu-webAppConfigWithEmuR"><i class="fa fa-check"></i><b>9.3.1</b> Basic configurations using <code>emuR</code></a></li>
<li class="chapter" data-level="9.3.2" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#signal-canvas-and-level-canvas-order"><i class="fa fa-check"></i><b>9.3.2</b> Signal canvas and level canvas order</a></li>
<li class="chapter" data-level="9.3.3" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#subsec:emu-webAppAdvancedConfig"><i class="fa fa-check"></i><b>9.3.3</b> Advanced configurations made by editing the <code>_DBconfig.json</code></a></li>
<li class="chapter" data-level="9.3.4" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#d-canvas"><i class="fa fa-check"></i><b>9.3.4</b> 2D canvas</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="chap-emu-webApp.html"><a href="chap-emu-webApp.html#conclusion-5"><i class="fa fa-check"></i><b>9.4</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>III Main <code>emuR</code> function and object index</b></span></li>
<li class="chapter" data-level="10" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html"><i class="fa fa-check"></i><b>10</b> <code>emuR</code> - package functions</a><ul>
<li class="chapter" data-level="10.1" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#sec:emuRpackageDetails-importRoutines"><i class="fa fa-check"></i><b>10.1</b> Import and conversion routines</a><ul>
<li class="chapter" data-level="10.1.1" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#legacy-emu-databases"><i class="fa fa-check"></i><b>10.1.1</b> Legacy EMU databases</a></li>
<li class="chapter" data-level="10.1.2" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#textgrid-collections"><i class="fa fa-check"></i><b>10.1.2</b> TextGrid collections</a></li>
<li class="chapter" data-level="10.1.3" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#bpf-collections"><i class="fa fa-check"></i><b>10.1.3</b> BPF collections</a></li>
<li class="chapter" data-level="10.1.4" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#txt-collections"><i class="fa fa-check"></i><b>10.1.4</b> txt collections</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#sec:emuRpackageDetails-emuDBinteract"><i class="fa fa-check"></i><b>10.2</b> <code>emuDB</code> interaction and configuration routines</a></li>
<li class="chapter" data-level="10.3" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#sec:emuRpackageDetails-emuWebAppConfig"><i class="fa fa-check"></i><b>10.3</b> <code>EMU-webApp</code> configuration routines</a></li>
<li class="chapter" data-level="10.4" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#sec:emuRpackageDetails-dataExtr"><i class="fa fa-check"></i><b>10.4</b> Data extraction routines</a></li>
<li class="chapter" data-level="10.5" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#sec:emuRpackageDetails-centralObjects"><i class="fa fa-check"></i><b>10.5</b> Central objects</a></li>
<li class="chapter" data-level="10.6" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#sec:emuRpackageDetails-exportRoutines"><i class="fa fa-check"></i><b>10.6</b> Export routines</a></li>
<li class="chapter" data-level="10.7" data-path="chap-emuRpackageDetails.html"><a href="chap-emuRpackageDetails.html#conclusion-6"><i class="fa fa-check"></i><b>10.7</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>IV Implementationx</b></span></li>
<li class="chapter" data-level="11" data-path="chap-querysys-impl.html"><a href="chap-querysys-impl.html"><i class="fa fa-check"></i><b>11</b> Implementation of the query system</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The EMU-SDMS Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chap:querysys_impl" class="section level1">
<h1><span class="header-section-number">11</span> Implementation of the query system<a href="#fn21" class="footnote-ref" id="fnref21"><sup>21</sup></a></h1>
<p>Compatibly with other query languages, the EQL defines the user a front-end interface and infers the query’s results from its semantics. However, a query language does not define any data structures or specify how the query engine is to be implemented. As mentioned in Chapter <a href="chap-overview.html#chap:overview">2</a>, a major user requirement was database portability, simple package installation, tolerable run times over complex queries, and a system that did not rely on external software at runtime. The only available back-end implementation that met those needs and was also available as an R package at the time was (R)SQLite (<span class="citation">Hipp and Kennedy (<a href="#ref-hipp:2007a">2007</a>)</span>, <span class="citation">Wickham, James, and Falcon (<a href="#ref-wickham:2014a">2014</a>)</span>). As (R)SQLite is a relational database management system, <code>emuR</code>’s query system could not be implemented so as to use directly the primary data sources of an <code>emuDB</code>, that is, the JSON files described in Chapter <a href="chap-emuDB.html#chap:emuDB">5</a>. A syncing mechanism that maps the primary data sources to a relational form for querying purposes had to be implemented. This relational form is referred to as the <code>emuDBcache</code> in the context of an <code>emuDB</code>. The data sources are synchronized while an <code>emuDB</code> is being loaded and when changes are made to the annotation files. To address load time issues, we implemented a file check-sum mechanism which only reloads and synchronizes annotation files that have a changed MD5-sum <span class="citation">(Rivest <a href="#ref-rivest:1992a">1992</a>)</span>. Figure <a href="chap-querysys-impl.html#fig:query-schematic-emuR-structure">11.1</a> is a schematic representation of how the various <code>emuDB</code> interaction functions interact with either the file representation or the relational cache.</p>
<!-- \begin{figure}[hpt] -->
<!-- \centering -->
<!--   \input{pics/emuRstruct} -->
<!--   \caption{Schematic architecture of `emuDB` interaction functions of the `emuR` package. \textcolor{three_color_c2}{Orange} paths show examples of functions interacting with the files of the `emuDB`, while \textcolor{three_color_c1}{green} paths show functions accessing the relational annotation structure. Actions like saving a changed annotation using the `EMU-webApp` first save the `\_annot.json` to disk then update the relational annotation structure.} -->
<!--   \label{fig:query_schematic_emuR_structure} -->
<!-- \end{figure} -->
<div class="figure" style="text-align: center"><span id="fig:query-schematic-emuR-structure"></span>
<img src="pics/emuRstruct.png" alt="Schematic architecture of `emuDB` interaction functions of the `emuR` package. textcolor{three-color-c2}{Orange} paths show examples of functions interacting with the files of the `emuDB`, while  extcolor{three-color-c1}{green} paths show functions accessing the relational annotation structure. Actions like saving a changed annotation using the `EMU-webApp` first save the `_annot.json` to disk then update the relational annotation structure." width="75%" />
<p class="caption">
Figure 11.1: Schematic architecture of <code>emuDB</code> interaction functions of the <code>emuR</code> package. textcolor{three-color-c2}{Orange} paths show examples of functions interacting with the files of the <code>emuDB</code>, while extcolor{three-color-c1}{green} paths show functions accessing the relational annotation structure. Actions like saving a changed annotation using the <code>EMU-webApp</code> first save the <code>_annot.json</code> to disk then update the relational annotation structure.
</p>
</div>
<!-- Despite the disadvantages of cache invalidation problems, there are several advantages to having an object relational mapping between the \ac{json}-based annotation structure of an `emuDB` and a relation table representation. One is that the user still has full access to the files within the directory structure of the `emuDB`. This means that external tools can be used to script, manipulate or simply interact with these files. This would not be the case if the files were stored in databases in a way that requires (semi-)advanced programming knowledge that might be beyond the capabilities of many users. Moreover, we can provide expert users with the option of using other relational database engines such as PostgreSQL, including all their performance-tweaking abilities, as their relational cache. This is especially valuable for handling very large speech databases. -->
<!-- The relational form of the annotation structure is split into six tables in the relational database to avoid data redundancy. The six tables are: -->
<!-- %%%%%%%%%%%%%%%%%%%%%% -->
<!-- \begin{enumerate} -->
<!-- \setcounter{enumi}{0} -->
<!--   \item `emu_db`: containing `emuDB` information (columns: `uuid`, `name`), -->
<!-- \end{enumerate} -->
<!-- \begin{tabular}{|c|c|} -->
<!--   \hline -->
<!--   \textbf{uuid} & \textbf{name} \\  -->
<!--   \hline -->
<!--   0fc618dc-8980-414d-8c7a-144a649ce199 & ae \\ -->
<!--   \hline -->
<!-- \end{tabular} -->
<!-- %%%%%%%%%%%%%%%%%%%%%% -->
<!-- \begin{enumerate} -->
<!-- \setcounter{enumi}{1} -->
<!--   \item `session`: containing `session` information (columns: `db_uuid`, `name`), -->
<!-- \end{enumerate} -->
<!-- \begin{tabular}{|c|c|} -->
<!--   \hline -->
<!--   \textbf{db\_uuid} & \textbf{name} \\  -->
<!--   \hline -->
<!--   0fc618dc-8980-414d-8c7a-144a649ce199 & 0000 \\ -->
<!--   \hline -->
<!--   \dots & \dots \\ -->
<!--   \hline -->
<!-- \end{tabular} -->
<!-- %%%%%%%%%%%%%%%%%%%%%%% -->
<!-- \begin{enumerate} -->
<!-- \setcounter{enumi}{2} -->
<!--   \item `bundle`: containing `bundle` information (columns: `db_uuid`, `session`, `name`, `annotates`, `sample_rate`, `md5\_annot\_json`), \\ -->
<!-- \end{enumerate} -->
<!-- \begin{tabular}{|c|c|c|c|c|c|} -->
<!--   \hline -->
<!--   \textbf{db\_uuid} & \textbf{ses\dots} & \textbf{name} & \textbf{annotates} & \textbf{sample\_r\dots} & \textbf{md5\_an\dots} \\  -->
<!--   \hline -->
<!--   0fc61\dots & 0000 & msajc003 & msajc003.wav & 20000 & 785c7\dots \\ -->
<!--   \hline -->
<!--   \dots & \dots & \dots & \dots & \dots & \dots \\ -->
<!--   \hline -->
<!-- \end{tabular} -->
<!-- %%%%%%%%%%%%%%%%%%%%%%% -->
<!-- \begin{enumerate} -->
<!-- \setcounter{enumi}{3} -->
<!--   \item `items`: containing all annotation items of `emuDB` (columns: `db_uuid`, `session`, `bundle`, `item_id`, `level`, `type`, `seq_idx`, `sample_rate`, `sample_point`, `sample_start`, `sample_dur`), -->
<!-- \end{enumerate} -->
<!-- \begin{tabular}{|c|c|c|c|c|c|c} -->
<!--   \hline -->
<!--   \textbf{db\_uuid} & \textbf{session} & \textbf{bundle} & \textbf{item\_id} & \textbf{level} & \textbf{type} \\  -->
<!--   \hline -->
<!--   0fc61\dots & 0000 & msajc003 & 147 & Phonetic & SEGMENT & \\ -->
<!--   \hline -->
<!--   \dots & \dots & \dots & \dots & \dots & \dots \\ -->
<!--   \hline -->
<!-- \end{tabular} -->
<!-- \begin{tabular}{c|c|c|c|c|} -->
<!--   \hline -->
<!--   \textbf{seq\_idx} &\textbf{sample\_rate} & \textbf{sample\_point} & \textbf{sample\_start} & \textbf{sample\_dur} \\  -->
<!--   \hline -->
<!--   1 & 20000 & NA & 3749 & 1389 \\ -->
<!--   \hline -->
<!--   \dots & \dots & \dots & \dots & \dots \\ -->
<!--   \hline -->
<!-- \end{tabular} -->
<!-- %%%%%%%%%%%%%%%%%%%%%%% -->
<!-- \begin{enumerate} -->
<!-- \setcounter{enumi}{4} -->
<!--   \item `labels`: containing all labels belonging to all items (columns: `db_uuid`, `session`, `bundle`, `item_id`, `label_idx`, `name`, `label`), and -->
<!-- \end{enumerate} -->
<!-- \begin{tabular}{|c|c|c|c|c|c|c|} -->
<!--   \hline -->
<!--   \textbf{db\_uuid} & \textbf{session} & \textbf{bundle} & \textbf{item\_id} & \textbf{label\_idx} & \textbf{name} & \textbf{label} \\  -->
<!--   \hline -->
<!--   0fc61\dots & 0000 & msajc003 & 147 & 1 & Phonetic & V \\ -->
<!--   \hline -->
<!--   \dots & \dots & \dots & \dots & \dots & \dots & \dots \\ -->
<!--   \hline -->
<!-- \end{tabular} -->
<!-- %%%%%%%%%%%%%%%%%%%%%%% -->
<!-- \begin{enumerate} -->
<!-- \setcounter{enumi}{5} -->
<!--   \item `links`: containing all links between annotation items of `emuDB` (columns: `db_uuid`, `session`, `bundle`, `from_id`, `to_id`, `label`). -->
<!-- \end{enumerate} -->
<!-- \begin{tabular}{|c|c|c|c|c|c|c|} -->
<!--   \hline -->
<!--   \textbf{db\_uuid} & \textbf{session} & \textbf{bundle} & \textbf{from\_id} & \textbf{to\_id} & \textbf{label} \\ -->
<!--   \hline -->
<!--   0fc61\dots & 0000 & msajc003 & 8 & 7 & NA \\ -->
<!--   \hline -->
<!--   \dots & \dots & \dots & \dots & \dots & \dots \\ -->
<!--   \hline -->
<!-- \end{tabular} -->
<!-- \\ -->
<!-- %%%%%%%%%%%%%%%%%%%%%%% -->
<!-- While performing a query the engine uses an aggregate key to address every annotation item and its labels (`db_uuid`, `session`, `bundle`, `item_id`) and a similar aggregate key to dereference the links (`db_uuid`, `session`, `bundle`, `from_id` / `to_id`) which connect items. As the records in relational tables are not intrinsically ordered a further aggregate key is used to address the annotation item via its index and level (`uuid`, `session`, `bundle`, `level` / `seq_idx`). This is used, for example, during sequential queries to provide an ordering of the individual annotation items. It is worth noting that a plethora of other tables are created at query time to store various temporary results of a query. However, these tables are created as temporary tables during the query and are deleted on completion which means they are not permanently stored in the `emuDBcache`. -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- \section{Query expression parser} -->
<!-- \label{sec:query_queryExpressionParser} -->
<!-- The query engine parses an \ac{eql} query expression while simultaneously executing partial query expressions. This ad-hoc string evaluation parsing strategy is different from multiple other query systems which incorporate a query planner stage to pre-parse and optimize the query execution stage \cite[e.g.,][]{hipp:2007a, conway:2016a}. Although no pre-optimization can be performed, this strategy simplifies the execution of a query as it follows a constant heuristic evaluation strategy. This section describes this heuristic evaluation and parsing strategy based on the \ac{eql} expression `[[Syllable == W -> Syllable == W] \textasciicircum [Phoneme == @ -> \#Phoneme == s]]`. -->
<!-- The main strategy of the query expression parser is to recursively parse and split an \ac{eql} expression into left and right sub-expressions until a so-called \ac{sq} term is found and can be executed (see \ac{ebnf} in Appendix \@ref(app-chap:EQL-EBNF) for more information on the elements comprising the \ac{eql}). This is done by determining the operator which is the first to be evaluated on the current expression. This operator is determined by the sub-expression grouping provided by the bracketing. Each sub-expression is then considered to be a fully valid \ac{eql} expression and once again parsed. Figure \@ref(fig:query-queryParserExample1), which is split into seven stages (marked S1-S7), shows the example \ac{eql} expression being parsed (S1-S3) and the resulting items being merged to meet the requirements of the individual operator (S4-S6) of the original query. S1 to S3 show the splitting operator character (e.g., \textcolor{three_color_c3}{`->`} in purple) which splits the expression into a \textcolor{three_color_c1}{left} (green) and \textcolor{three_color_c2}{right} (orange) sub-expression.  -->
<!-- \begin{figure}[hpt] -->
<!-- \centering -->
<!-- \input{pics/queryParserExample1} -->
<!-- \caption{Example of how the query expression parser parses and evaluates an \ac{eql} expression and merges the result according to the respective \ac{eql} operators.} -->
<!-- \label{fig:query_queryParserExample1} -->
<!-- \end{figure} -->
<!-- The result modifier symbol (`#`) is noteworthy for its extra treatment by the query engine as it places an exact copy of the items marked by it into its own intermediary result storage (see \#*s*\textsubscript{items} node on S7 in Figure \@ref(fig:query-queryParserExample1)). After performing the database operations necessary to do the various merging operation which are performed on the intermediary results, this storage is updated by removing items from it that are no longer present due to the merging operation. As a final step, the query engine evaluates if there are items present in the intermediary result storage created by the presence of the result modifier symbol. If so, these items are used to create an `emuRsegs` object by deriving the time information and extracting the necessary information from the intermediate result storage. If no items are present in the result modifier storage, the query engine uses the items provided by the final merging procedure in S3 instead (which is not the case in the example used in Figure \@ref(fig:query-queryParserExample1)). -->
<!-- A detailed description of how this query expression parser functions is presented in a pseudo code representation in Algorithms \@ref(alg:query-implQueryEnginePC-p1) and \@ref(alg:query-implQueryEnginePC-p2)\footnote{The R code that implements this pseudo code can be found here: \url{https://github.com/IPS-LMU/emuR/blob/master/R/emuR-query.database.R}.}. For simplicity, this representation ignores the treatment of the result modifier symbol (\#) and focuses on the parsing and evaluation strategy of the query expression parser. As stated previously, the presence of the result modifier before an \ac{sq} triggers the query engine to place a copy of the result of that \ac{sq} into an additional result table, which is then updated throughout the rest of the query. The starting point for every query is the `query()` function (see line \@ref(alg:query-implQueryEnginePC-p2:line:query) in Algorithm \@ref(alg:query-implQueryEnginePC-p2)). This function places the filtered items, links and labels entries that are relevant for the current query into temporary tables. Depending on which query terms and operators are found, the \ac{eql} query engine uses the various sub-routines displayed in Algorithms \@ref(alg:query-implQueryEnginePC-p1) and \@ref(alg:query-implQueryEnginePC-p2) to parse and evaluate the \ac{eql} expression. -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- % -->
<!-- \begin{algorithm} -->
<!--     \caption{Pseudo Code for Query Engine Algorithm - Part 1} -->
<!--     \begin{algorithmic}[1] % The number tells where the line numbering should start -->
<!--     %%%%%%%%%%%%%%%%%%% -->
<!--     \Function{query\_DbEqlFUNCQ}{$query$} -->
<!--       \State $place\ all\ parent\ level\ items\ into\ tmp\ table$ -->
<!--       \State $place\ all\ child\ level\ items\ into\ tmp\ table$ -->
<!--       \State \Call{query\_DbHier}{$parentItemsTable$, $childItemsTable$} -->
<!--       \If {$Start\ End\ or\ Medial\ query$} -->
<!--         \State $extract\ parent\ items\ and\ place\ in\ tmp\ result\ table$ -->
<!--       \Else -->
<!--         \State $extract\ child\ items\ and\ place\ in\ tmp\ result\ table$ -->
<!--       \EndIf -->
<!--        \EndFunction -->
<!--     %%%%%%%%%%%%%%%%%%% -->
<!--     \Function{query\_DbEqlLABELQ}{$query$} -->
<!--       \State $splitLabels \gets split\ labels\ at\ |$ -->
<!--       \ForAll{$splitLabels$} -->
<!--                \If {operator is $==$, $=$ or $!=$} -->
<!--            \State $extract\ items\ that\ contain\ labels\ which\ are\ equal\ or\ unequal\ to\ label$ -->
<!--            \ElsIf{operator is $=~$ or $!\sim$} -->
<!--                \State $extract\ items\ that\ contain\ labels\ that\ match\ or\ don't\ match\ RegEx$ -->
<!--            \EndIf -->
<!--            \State $merge\ results\ in\ tmp\ table$ -->
<!--            \EndFor -->
<!--        \EndFunction -->
<!--     %%%%%%%%%%%%%%%%%%% -->
<!--     \Function{query\_DbEqlSQ}{query} -->
<!--            \If {$query\ contains\ round\ brackets$} -->
<!--                \State \Call{query\_DbEqlFUNCQ}{$query$} -->
<!--            \Else -->
<!--                \State \Call{query\_DbEqlLABELQ}{$query$} -->
<!--            \EndIf -->
<!--        \EndFunction -->
<!--     %%%%%%%%%%%%%%%%%%% -->
<!--     \Function{query\_DbEqlCONJQ}{query} -->
<!--            \State $splitItems \gets split\ query\ at\ \&$ -->
<!--            \ForAll{$splitItems$} -->
<!--                \State \Call{query\_DbEqlSQ}{$splitItems$} -->
<!--                \State $merge\ results\ in\ tmp\ table$ -->
<!--            \EndFor -->
<!--        \EndFunction -->
<!--     %%%%%%%%%%%%%%%%%%% -->
<!--     \Function{query\_DbHier}{$leftTable$, $rightTable$} -->
<!--       \State $hp \gets extract\ hier.\ paths\ conn.\ leftTable\ and\ rightTable\ level\ names$ -->
<!--       \ForAll{$child\ and\ parent\ level\ pairs\ in\ hp$} -->
<!--         \State $connect\ child\ and\ parent\ items\ using\ links\ table$ -->
<!--         \State $reduce\ to\ min\ seq.\ idx\ (left\ side\ of\ trapeze)$ -->
<!--         \State $and\ to\ max\ seq.\ idx\ (right\ side\ of\ trapeze)$ -->
<!--       \EndFor -->
<!--        \EndFunction -->
<!--     %%%%%%%%%%%%%%%%%%%% -->
<!--     \algstore{testcont}  -->
<!--     \end{algorithmic} -->
<!--     \label{alg:query_implQueryEnginePC_p1} -->
<!-- \end{algorithm} -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- % -->
<!-- \begin{algorithm} -->
<!--     \caption{Pseudo Code for Query Engine Algorithm - Part 2} -->
<!--     \begin{algorithmic}[1] % The number tells where the line numbering should start -->
<!--     \algrestore{testcont} -->
<!--        %%%%%%%%%%%%%%%%%%%% -->
<!--     \Function{query\_DbEqlInBracket}{$query$} -->
<!--       \State $qTrim \gets remove\ outer\ square\ brackets$ -->
<!--      \State $leftQuery,\ rightQuery \gets split\ qTrim\ at\ cur.\ operator$ -->
<!--      \State \Call{query\_databaseWithEql}{$leftQuery$} \Comment{recursive part of query} -->
<!--      \State \Call{query\_databaseWithEql}{$rightQuery$} \Comment{recursive part of query} -->
<!--      \If {$cur.\ operator\ is\ domintation\ operator$} -->
<!--         \State \Call{query\_DbHier}{$leftQueryResultTable$, $rightQueryResultTable$} -->
<!--       \ElsIf{$cur.\ operator\ is\ seq.\ operator$} -->
<!--        \State $find\ seq.\ of\ leftQueryResultTable\ and\ rightQueryResultTable\ items$ -->
<!--       \Else -->
<!--        \State \Call{query\_databaseWithEql}{$qTrim$} -->
<!--     \EndIf -->
<!--        \EndFunction -->
<!--     %%%%%%%%%%%%%%%%%%%% -->
<!--     \Function{query\_DbWithEql}{$query$} -->
<!--       \If {$query\ isn't\ wrapped\ in\ brackets$} -->
<!--          \State \Call{query\_DbEqlCONJQ}{$query$} -->
<!--          \Else -->
<!--              \State \Call{query\_DbEqlInBracket}{$query$} -->
<!--          \EndIf -->
<!--        \EndFunction -->
<!--     %%%%%%%%%%%%%%%%%%%% -->
<!--     \Function{query}{$query$, $sesPattern$, $bndlPattern$} \label{alg:query_implQueryEnginePC_p2:line:query} -->
<!--        \State $filter\ items\ in\ relational\ tables\ by\ sesPattern$ -->
<!--        \State $filter\ items\ in\ relational\ tables\ by\ bndlPattern$ -->
<!--       \State \Call{query\_DbWithEql}{$query$} -->
<!--       \State $seglist\gets$ \Call{convert\_queryResultToEmuRsegs}{$tmpResultTableName$} -->
<!--       \State \textbf{return} $seglist$ -->
<!--     \EndFunction -->
<!--     %%%%%%%%%%%%%%%%%%%% -->
<!--     \end{algorithmic} -->
<!--     \label{alg:query_implQueryEnginePC_p2} -->
<!-- \end{algorithm} -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- \section{Redundant links} -->
<!-- \label{subsec:query_redundantLinks} -->
<!-- A noteworthy difference between the legacy and the new EMU system is how hierarchies are stored. The legacy system stored the linking information of a hierarchy in so-called hierarchical label files, which were plain text files that used the `.hlb` extensions. Within the label files this information was stored in space/blank separated lines: -->
<!-- \begin{Verbatim}[commandchars=\\\{\},codes={\catcode`$=3\catcode`^=7\catcode`_=8}] -->
<!-- \textcolor{three_color_c1}{111} \textcolor{three_color_c2}{139 140 141 173 174 175 185} -->
<!-- \textcolor{three_color_c1}{112} \textcolor{three_color_c2}{142 143 176 177} -->
<!-- \textcolor{three_color_c1}{113} \textcolor{three_color_c2}{144 145 146 178 179 180} -->
<!-- \textcolor{three_color_c1}{114} \textcolor{three_color_c2}{147} -->
<!-- \textcolor{three_color_c1}{115} \textcolor{three_color_c2}{148} -->
<!-- \textcolor{three_color_c1}{116} \textcolor{three_color_c2}{149}, -->
<!-- \end{Verbatim} -->
<!-- where the \textcolor{three_color_c1}{first number} (green) of each line was the parent's ID and the \textcolor{three_color_c2}{following numbers} (orange) indicated the annotation items the parent was linked to. However, it was not just links to the items on the child level that were stored in each line. Rather, a link to all children of all levels below the parent level was stored for each parent item. This was likely due to performance benefits in parsing and mapping onto the internal structures used by the legacy query engine. A schematic representation of this form of linking is displayed in Figure \@ref(fig:query-redundant)A. As these redundant links are prone to errors while updating the data model and lead to a convoluted annotation structure models (see excessive use of dashed lines in Figure \@ref(fig:query-redundant)A), we chose to eliminate them and opted for the cleaner, non-redundant representation displayed in Figure \@ref(fig:query-redundant)B. Although this led to a more complex query parser engine for hierarchical queries and functions, we feel it is a cleaner, more accurate and more robust data representation. -->
<!-- \begin{figure}[hpt] -->
<!-- \centering -->
<!-- \input{pics/aeGraph_redundant.tex} -->
<!-- \caption{Schematic of hierarchy graph *ae*; \textbf{A}: legacy redundant strategy vs. \textbf{A}: cleaner non-redundant strategy.} -->
<!-- \label{fig:query_redundant} -->
<!-- \end{figure} -->

</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-hipp:2007a">
<p>Hipp, D Richard, and D Kennedy. 2007. “SQLite.” <a href="https://www.sqlite.org/" class="uri">https://www.sqlite.org/</a>.</p>
</div>
<div id="ref-wickham:2014a">
<p>Wickham, Hadley, David A. James, and Seth Falcon. 2014. <em>RSQLite: SQLite Interface for R</em>. <a href="https://CRAN.R-project.org/package=RSQLite" class="uri">https://CRAN.R-project.org/package=RSQLite</a>.</p>
</div>
<div id="ref-rivest:1992a">
<p>Rivest, Ronald. 1992. “The Md5 Message-Digest Algorithm.” <a href="https://tools.ietf.org/html/rfc1321" class="uri">https://tools.ietf.org/html/rfc1321</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="21">
<li id="fn21"><p>Sections of this chapter have been published in <span class="citation">Winkelmann, Harrington, and Jänsch (<a href="#ref-winkelmann:2017aa">2017</a>)</span>.<a href="chap-querysys-impl.html#fnref21" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chap-emuRpackageDetails.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/query_impl.Rmd",
"text": "Edit"
},
"download": ["_main.pdf", "_main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
