<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="3.4 Autobuilding | The EMU-SDMS Manual" />
<meta property="og:type" content="book" />
<meta property="og:url" content="https://ips-lmu.github.io/The-EMU-SDMS-Manual/" />
<meta property="og:image" content="https://ips-lmu.github.io/The-EMU-SDMS-Manual/pics/EMU-webAppIcon-roundCorners.png" />
<meta property="og:description" content="3.4 Autobuilding | The EMU-SDMS Manual" />
<meta name="github-repo" content="IPS-LMU/The-EMU-SDMS-Manual" />

<meta name="author" content="Raphael Winkelmann" />


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="3.4 Autobuilding | The EMU-SDMS Manual">

<title>3.4 Autobuilding | The EMU-SDMS Manual</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/darkly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link rel="stylesheet" href="style.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#welcome">Welcome</a></li>
<li class="has-sub"><a href="1-installing-the-emu-sdms.html#installing-the-emu-sdms"><span class="toc-section-number">1</span> Installing the EMU-SDMS</a><ul>
<li><a href="1-1-version-disclaimer.html#version-disclaimer"><span class="toc-section-number">1.1</span> Version disclaimer</a></li>
<li><a href="1-2-for-developers-and-people-interested-in-the-source-code.html#for-developers-and-people-interested-in-the-source-code"><span class="toc-section-number">1.2</span> For developers and people interested in the source code</a></li>
</ul></li>
<li class="part"><span><b>I Overview and tutorial</b></span></li>
<li class="has-sub"><a href="2-chap-overview.html#chap:overview"><span class="toc-section-number">2</span> An overview of the EMU-SDMS</a><ul>
<li><a href="2-1-the-evolution-of-the-emu-sdms.html#the-evolution-of-the-emu-sdms"><span class="toc-section-number">2.1</span> The evolution of the EMU-SDMS</a></li>
<li><a href="2-2-sec-overview-sysArch.html#sec:overview-sysArch"><span class="toc-section-number">2.2</span> EMU-SDMS: System architecture and default workflow</a></li>
<li><a href="2-3-emu-sdms-is-it-something-for-you.html#emu-sdms-is-it-something-for-you"><span class="toc-section-number">2.3</span> EMU-SDMS: Is it something for you?</a></li>
</ul></li>
<li class="has-sub"><a href="3-chap-tutorial.html#chap:tutorial"><span class="toc-section-number">3</span> A tutorial on how to use the EMU-SDMS</a><ul>
<li><a href="3-1-converting-the-textgrid-collection.html#converting-the-textgrid-collection"><span class="toc-section-number">3.1</span> Converting the TextGrid collection</a></li>
<li class="has-sub"><a href="3-2-loading-and-inspecting-the-database.html#loading-and-inspecting-the-database"><span class="toc-section-number">3.2</span> Loading and inspecting the database</a><ul>
<li><a href="3-2-loading-and-inspecting-the-database.html#overview"><span class="toc-section-number">3.2.1</span> Overview</a></li>
<li><a href="3-2-loading-and-inspecting-the-database.html#database-annotation-and-visual-inspection"><span class="toc-section-number">3.2.2</span> Database annotation and visual inspection</a></li>
</ul></li>
<li><a href="3-3-querying-and-autobuilding-the-annotation-structure.html#querying-and-autobuilding-the-annotation-structure"><span class="toc-section-number">3.3</span> Querying and autobuilding the annotation structure</a></li>
<li class="has-sub"><a href="3-4-autobuilding.html#autobuilding"><span class="toc-section-number">3.4</span> Autobuilding</a><ul>
<li><a href="3-4-autobuilding.html#querying-the-hierarchical-annotations"><span class="toc-section-number">3.4.1</span> Querying the hierarchical annotations</a></li>
</ul></li>
<li><a href="3-5-section-tutorial-sigExtrAndExpl.html#section:tutorial-sigExtrAndExpl"><span class="toc-section-number">3.5</span> Signal extraction and exploration</a></li>
<li><a href="3-6-vowel-height-as-a-function-of-word-types-content-vs-function-evaluation-and-statistical-analysis.html#vowel-height-as-a-function-of-word-types-content-vs.-function-evaluation-and-statistical-analysis"><span class="toc-section-number">3.6</span> Vowel height as a function of word types (content vs. function): evaluation and statistical analysis</a></li>
<li><a href="3-7-conclusion.html#conclusion"><span class="toc-section-number">3.7</span> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>II Main components and concepts</b></span></li>
<li class="has-sub"><a href="4-chap-annot-struct-mod.html#chap:annot-struct-mod"><span class="toc-section-number">4</span> Annotation Structure Modeling</a><ul>
<li><a href="4-1-per-database-annotation-structure-definition.html#per-database-annotation-structure-definition"><span class="toc-section-number">4.1</span> Per database annotation structure definition</a></li>
<li><a href="4-2-parallel-labels-and-multiple-attributes.html#parallel-labels-and-multiple-attributes"><span class="toc-section-number">4.2</span> Parallel labels and multiple attributes</a></li>
<li><a href="4-3-metadata-strategy-using-single-bundle-root-nodes.html#metadata-strategy-using-single-bundle-root-nodes"><span class="toc-section-number">4.3</span> Metadata strategy using single bundle root nodes</a></li>
<li><a href="4-4-conclusion-1.html#conclusion-1"><span class="toc-section-number">4.4</span> Conclusion</a></li>
</ul></li>
<li class="has-sub"><a href="5-chap-emuDB.html#chap:emuDB"><span class="toc-section-number">5</span> The <code>emuDB</code> Format</a><ul>
<li><a href="5-1-database-design.html#database-design"><span class="toc-section-number">5.1</span> Database design</a></li>
<li class="has-sub"><a href="5-2-creating-an-emudb.html#creating-an-emudb"><span class="toc-section-number">5.2</span> Creating an <code>emuDB</code></a><ul>
<li><a href="5-2-creating-an-emudb.html#creating-an-emudb-from-scratch"><span class="toc-section-number">5.2.1</span> Creating an <code>emuDB</code> from scratch</a></li>
<li><a href="5-2-creating-an-emudb.html#loading-and-editing-an-empty-database"><span class="toc-section-number">5.2.2</span> Loading and editing an empty database</a></li>
<li><a href="5-2-creating-an-emudb.html#level-definitions"><span class="toc-section-number">5.2.3</span> Level definitions</a></li>
<li><a href="5-2-creating-an-emudb.html#link-definitions"><span class="toc-section-number">5.2.4</span> Link definitions</a></li>
<li><a href="5-2-creating-an-emudb.html#file-handling"><span class="toc-section-number">5.2.5</span> File handling</a></li>
<li><a href="5-2-creating-an-emudb.html#ssff-track-definitions"><span class="toc-section-number">5.2.6</span> SSFF track definitions</a></li>
<li><a href="5-2-creating-an-emudb.html#configuring-the-emu-webapp-and-annotating-the-emudb"><span class="toc-section-number">5.2.7</span> Configuring the <code>EMU-webApp</code> and annotating the <code>emuDB</code></a></li>
</ul></li>
<li><a href="5-3-conclusion-2.html#conclusion-2"><span class="toc-section-number">5.3</span> Conclusion</a></li>
</ul></li>
<li class="has-sub"><a href="6-chap-querysys.html#chap:querysys"><span class="toc-section-number">6</span> The query system</a><ul>
<li><a href="6-1-sec-query-emuRsegs.html#sec:query-emuRsegs"><span class="toc-section-number">6.1</span> The resulting object of a query</a></li>
<li class="has-sub"><a href="6-2-eql-the-emu-query-language-version-2.html#eql-the-emu-query-language-version-2"><span class="toc-section-number">6.2</span> <code>EQL</code>: The EMU Query Language version 2</a><ul>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#simple-queries"><span class="toc-section-number">6.2.1</span> Simple queries</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#combining-simple-queries"><span class="toc-section-number">6.2.2</span> Combining simple queries</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#subsec:query-positionQueries"><span class="toc-section-number">6.2.3</span> Position queries</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#subsec:query-countQueries"><span class="toc-section-number">6.2.4</span> Count queries</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#subsec:query-moreComplexQueries"><span class="toc-section-number">6.2.5</span> More complex queries</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#subsec:query-deducingTime"><span class="toc-section-number">6.2.6</span> Deducing time</a></li>
<li><a href="6-2-eql-the-emu-query-language-version-2.html#subsec:requery"><span class="toc-section-number">6.2.7</span> Requery</a></li>
</ul></li>
<li><a href="6-3-discussion.html#discussion"><span class="toc-section-number">6.3</span> Discussion</a></li>
</ul></li>
<li class="has-sub"><a href="7-chap-sigDataExtr.html#chap:sigDataExtr"><span class="toc-section-number">7</span> Signal data extraction</a><ul>
<li><a href="7-1-extracting-pre-defined-tracks.html#extracting-pre-defined-tracks"><span class="toc-section-number">7.1</span> Extracting pre-defined tracks</a></li>
<li><a href="7-2-adding-new-tracks.html#adding-new-tracks"><span class="toc-section-number">7.2</span> Adding new tracks</a></li>
<li><a href="7-3-calculating-tracks-on-the-fly.html#calculating-tracks-on-the-fly"><span class="toc-section-number">7.3</span> Calculating tracks on-the-fly</a></li>
<li><a href="7-4-the-resulting-object-tibble.html#the-resulting-object-tibble"><span class="toc-section-number">7.4</span> The resulting object: <code>tibble</code></a></li>
<li><a href="7-5-conclusion-3.html#conclusion-3"><span class="toc-section-number">7.5</span> Conclusion</a></li>
</ul></li>
<li class="has-sub"><a href="8-chap-wrassp.html#chap:wrassp"><span class="toc-section-number">8</span> The R package <code>wrassp</code></a><ul>
<li><a href="8-1-introduction.html#introduction"><span class="toc-section-number">8.1</span> Introduction</a></li>
<li><a href="8-2-file-i0-and-the-asspdataobj.html#file-i0-and-the-asspdataobj"><span class="toc-section-number">8.2</span> File I/0 and the <code>AsspDataObj</code></a></li>
<li><a href="8-3-signal-processing.html#signal-processing"><span class="toc-section-number">8.3</span> Signal processing</a></li>
<li><a href="8-4-subsec-wrassp-wrasspOutputInfos.html#subsec:wrassp-wrasspOutputInfos"><span class="toc-section-number">8.4</span> The <code>wrasspOutputInfos</code> object</a></li>
<li class="has-sub"><a href="8-5-subsec-wrassp-formants.html#subsec:wrassp-formants"><span class="toc-section-number">8.5</span> Formants and their bandwidths</a><ul>
<li><a href="8-5-subsec-wrassp-formants.html#subsec:wrassp_f0"><span class="toc-section-number">8.5.1</span> Fundamental frequency contour</a></li>
<li><a href="8-5-subsec-wrassp-formants.html#subsec:wrassp-RMS"><span class="toc-section-number">8.5.2</span> RMS energy contour</a></li>
</ul></li>
<li><a href="8-6-sec-wrassp-logging.html#sec:wrassp_logging"><span class="toc-section-number">8.6</span> Logging <code>wrassp</code>’s function calls</a></li>
<li><a href="8-7-sec-wrassp-emu-sdms.html#sec:wrassp-emu-sdms"><span class="toc-section-number">8.7</span> Using <code>wrassp</code> in the EMU-SDMS</a></li>
<li><a href="8-8-sec-wrassp-genSSFF.html#sec:wrassp_genSSFF"><span class="toc-section-number">8.8</span> Storing data in the SSFF file format</a></li>
<li><a href="8-9-conclusion-4.html#conclusion-4"><span class="toc-section-number">8.9</span> Conclusion</a></li>
</ul></li>
<li class="has-sub"><a href="9-chap-emu-webApp.html#chap:emu-webApp"><span class="toc-section-number">9</span> The <code>EMU-webApp</code></a><ul>
<li><a href="9-1-sec-emu-webApp-mainLayout.html#sec:emu-webApp-mainLayout"><span class="toc-section-number">9.1</span> Main layout</a></li>
<li class="has-sub"><a href="9-2-sec-webApp-generalUsage.html#sec:webApp-generalUsage"><span class="toc-section-number">9.2</span> General usage</a><ul>
<li><a href="9-2-sec-webApp-generalUsage.html#annotating-levels-containing-time-information"><span class="toc-section-number">9.2.1</span> Annotating levels containing time information</a></li>
<li><a href="9-2-sec-webApp-generalUsage.html#working-with-hierarchical-annotations-2-chapemu-webapp"><span class="toc-section-number">9.2.2</span> Working with hierarchical annotations</a></li>
</ul></li>
<li class="has-sub"><a href="9-3-configuring-the-emu-webapp.html#configuring-the-emu-webapp"><span class="toc-section-number">9.3</span> Configuring the <code>EMU-webApp</code></a><ul>
<li><a href="9-3-configuring-the-emu-webapp.html#subsec:emu-webAppConfigWithEmuR"><span class="toc-section-number">9.3.1</span> Basic configurations using <code>emuR</code></a></li>
<li><a href="9-3-configuring-the-emu-webapp.html#signal-canvas-and-level-canvas-order"><span class="toc-section-number">9.3.2</span> Signal canvas and level canvas order</a></li>
<li><a href="9-3-configuring-the-emu-webapp.html#subsec:emu-webAppAdvancedConfig"><span class="toc-section-number">9.3.3</span> Advanced configurations made by editing the <code>_DBconfig.json</code></a></li>
<li><a href="9-3-configuring-the-emu-webapp.html#d-canvas"><span class="toc-section-number">9.3.4</span> 2D canvas</a></li>
</ul></li>
<li><a href="9-4-conclusion-5.html#conclusion-5"><span class="toc-section-number">9.4</span> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>III Main <code>emuR</code> function and object index</b></span></li>
<li class="has-sub"><a href="10-chap-emuRpackageDetails.html#chap:emuRpackageDetails"><span class="toc-section-number">10</span> <code>emuR</code> - package functions</a><ul>
<li class="has-sub"><a href="10-1-sec-emuRpackageDetails-importRoutines.html#sec:emuRpackageDetails-importRoutines"><span class="toc-section-number">10.1</span> Import and conversion routines</a><ul>
<li><a href="10-1-sec-emuRpackageDetails-importRoutines.html#legacy-emu-databases"><span class="toc-section-number">10.1.1</span> Legacy EMU databases</a></li>
<li><a href="10-1-sec-emuRpackageDetails-importRoutines.html#textgrid-collections"><span class="toc-section-number">10.1.2</span> TextGrid collections</a></li>
<li><a href="10-1-sec-emuRpackageDetails-importRoutines.html#bpf-collections"><span class="toc-section-number">10.1.3</span> BPF collections</a></li>
<li><a href="10-1-sec-emuRpackageDetails-importRoutines.html#txt-collections"><span class="toc-section-number">10.1.4</span> txt collections</a></li>
</ul></li>
<li><a href="10-2-sec-emuRpackageDetails-emuDBinteract.html#sec:emuRpackageDetails-emuDBinteract"><span class="toc-section-number">10.2</span> <code>emuDB</code> interaction and configuration routines</a></li>
<li><a href="10-3-sec-emuRpackageDetails-emuWebAppConfig.html#sec:emuRpackageDetails-emuWebAppConfig"><span class="toc-section-number">10.3</span> <code>EMU-webApp</code> configuration routines</a></li>
<li><a href="10-4-sec-emuRpackageDetails-dataExtr.html#sec:emuRpackageDetails-dataExtr"><span class="toc-section-number">10.4</span> Data extraction routines</a></li>
<li><a href="10-5-sec-emuRpackageDetails-centralObjects.html#sec:emuRpackageDetails-centralObjects"><span class="toc-section-number">10.5</span> Central objects</a></li>
<li><a href="10-6-sec-emuRpackageDetails-exportRoutines.html#sec:emuRpackageDetails-exportRoutines"><span class="toc-section-number">10.6</span> Export routines</a></li>
<li><a href="10-7-conclusion-6.html#conclusion-6"><span class="toc-section-number">10.7</span> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>IV Implementation</b></span></li>
<li class="has-sub"><a href="11-chap-querysys-impl.html#chap:querysys-impl"><span class="toc-section-number">11</span> Implementation of the query system</a><ul>
<li><a href="11-1-sec-query-queryExpressionParser.html#sec:query-queryExpressionParser"><span class="toc-section-number">11.1</span> Query expression parser</a></li>
<li><a href="11-2-subsec-query-redundantLinks.html#subsec:query-redundantLinks"><span class="toc-section-number">11.2</span> Redundant links</a></li>
</ul></li>
<li class="has-sub"><a href="12-chap-wrassp-impl.html#chap:wrassp_impl"><span class="toc-section-number">12</span> <code>wrassp</code> implementation</a><ul>
<li><a href="12-1-the-libassp-port.html#the-libassp-port"><span class="toc-section-number">12.1</span> The <code>libassp</code> port</a></li>
</ul></li>
<li class="has-sub"><a href="13-chap-emu-webAppImplementation.html#chap:emu-webAppImplementation"><span class="toc-section-number">13</span> <code>EMU-webApp</code> implementation</a><ul>
<li><a href="13-1-subsec-emu-webAppTheProtocol.html#subsec:emu-webAppTheProtocol"><span class="toc-section-number">13.1</span> Communication protocol</a></li>
<li class="has-sub"><a href="13-2-url-parameters.html#url-parameters"><span class="toc-section-number">13.2</span> URL parameters</a><ul>
<li><a href="13-2-url-parameters.html#websocket-server-parameters"><span class="toc-section-number">13.2.1</span> Websocket server parameters</a></li>
<li><a href="13-2-url-parameters.html#examples"><span class="toc-section-number">13.2.2</span> Examples</a></li>
<li><a href="13-2-url-parameters.html#label-file-preview-parameters"><span class="toc-section-number">13.2.3</span> Label file preview parameters</a></li>
<li><a href="13-2-url-parameters.html#examples-1"><span class="toc-section-number">13.2.4</span> Examples</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Appendices</b></span></li>
<li class="has-sub"><a href="14-app-chap-useCases.html#app-chap:useCases"><span class="toc-section-number">14</span> Use cases</a><ul>
<li><a href="14-1-sec-app-chap-useCases-q1.html#sec:app-chap-useCases-q1"><span class="toc-section-number">14.1</span> What is the average length of all <em>n</em> phonetic segments in the <em>ae</em> <code>emuDB</code>?</a></li>
<li><a href="14-2-sec-app-chap-useCases-q2.html#sec:app-chap-useCases-q2"><span class="toc-section-number">14.2</span> What does the F1 and F2 distribution of all phonetic segments that contain the labels <em>I</em>, <em>o:</em>, <em>u:</em>, <em>V</em> or <em>@</em> look like?</a></li>
<li><a href="14-3-sec-app-chap-useCases-q3.html#sec:app-chap-useCases-q3"><span class="toc-section-number">14.3</span> What words do the phonetic segments that carry the labels <em>s</em>, <em>z</em>, <em>S</em> or <em>Z</em> in the <em>ae</em> <code>emuDB</code> occur in and what is their phonetic context?</a></li>
<li class="has-sub"><a href="14-4-sec-app-chap-useCases-q4.html#sec:app-chap-useCases-q4"><span class="toc-section-number">14.4</span> Do the phonetic segments labeled <em>s</em>, <em>z</em>, <em>S</em> or <em>Z</em> in the <em>ae</em> <code>emuDB</code> differ with respect to their first spectral moment?\footnote{The original version of this use case was written by Florian Schiel as part of the <code>emuR_intro</code> vignette that is part of the <code>emuR</code> package.</a><ul>
<li><a href="14-4-sec-app-chap-useCases-q4.html#note-see-refrecipespectralanalysis-for-more-up-to-date-methods-of-performing-spectral-analysis"><span class="toc-section-number">14.4.1</span> NOTE: See @ref(recipe:spectralAnalysis) for more up to date methods of performing spectral analysis</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="15-app-chap-fileFormats.html#app-chap:fileFormats"><span class="toc-section-number">15</span> File Formats</a><ul>
<li class="has-sub"><a href="15-1-file-descriptions.html#file-descriptions"><span class="toc-section-number">15.1</span> File descriptions</a><ul>
<li><a href="15-1-file-descriptions.html#subsec:app-chapFileFormatsDBconfig"><span class="toc-section-number">15.1.1</span> <code>_DBconfig.json</code></a></li>
<li><a href="15-1-file-descriptions.html#subsec:app-chapFileFormatsAnnotJSON"><span class="toc-section-number">15.1.2</span> <code>_annot.json</code></a></li>
<li><a href="15-1-file-descriptions.html#subsec:app-chapFileFormatsSSFF"><span class="toc-section-number">15.1.3</span> The SSFF file format</a></li>
</ul></li>
<li class="has-sub"><a href="15-2-example-files.html#example-files"><span class="toc-section-number">15.2</span> Example files</a><ul>
<li><a href="15-2-example-files.html#subsec:app-chapExampleFilesBundleList"><span class="toc-section-number">15.2.1</span> <code>_bundleList.json</code></a></li>
<li><a href="15-2-example-files.html#subsec:app-chapExampleFilesBndlJSON"><span class="toc-section-number">15.2.2</span> <code>_bndl.json</code></a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="16-app-chap-wsProtocol.html#app-chap:wsProtocol"><span class="toc-section-number">16</span> The <code>EMU-webApp-websocket-protocol</code> Version 2.0</a><ul>
<li><a href="16-1-protocol-overview.html#protocol-overview"><span class="toc-section-number">16.1</span> Protocol overview</a></li>
<li class="has-sub"><a href="16-2-protocol-commands.html#protocol-commands"><span class="toc-section-number">16.2</span> Protocol commands</a><ul>
<li><a href="16-2-protocol-commands.html#getprotocol"><span class="toc-section-number">16.2.1</span> <code>GETPROTOCOL</code></a></li>
<li><a href="16-2-protocol-commands.html#getdousermanagement"><span class="toc-section-number">16.2.2</span> <code>GETDOUSERMANAGEMENT</code></a></li>
<li><a href="16-2-protocol-commands.html#logonuser"><span class="toc-section-number">16.2.3</span> <code>LOGONUSER</code></a></li>
<li><a href="16-2-protocol-commands.html#getglobaldbconfig"><span class="toc-section-number">16.2.4</span> <code>GETGLOBALDBCONFIG</code></a></li>
<li><a href="16-2-protocol-commands.html#getbundlelist"><span class="toc-section-number">16.2.5</span> <code>GETBUNDLELIST</code></a></li>
<li><a href="16-2-protocol-commands.html#getbundle"><span class="toc-section-number">16.2.6</span> <code>GETBUNDLE</code></a></li>
<li><a href="16-2-protocol-commands.html#savebundle"><span class="toc-section-number">16.2.7</span> <code>SAVEBUNDLE</code></a></li>
<li><a href="16-2-protocol-commands.html#disconnectwarning"><span class="toc-section-number">16.2.8</span> <code>DISCONNECTWARNING</code></a></li>
<li><a href="16-2-protocol-commands.html#error-handling"><span class="toc-section-number">16.2.9</span> Error handling</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="17-app-chap-EQL-EBNF.html#app-chap:EQL-EBNF"><span class="toc-section-number">17</span> EQL EBNF</a><ul>
<li><a href="17-1-terminal-symbols-of-eql2-operators-and-their-meaning.html#terminal-symbols-of-eql2-operators-and-their-meaning"><span class="toc-section-number">17.1</span> Terminal symbols of EQL2 (operators) and their meaning</a></li>
<li><a href="17-2-terminal-symbols-of-eql2-brackets-and-their-meanings-.html#terminal-symbols-of-eql2-brackets-and-their-meanings."><span class="toc-section-number">17.2</span> Terminal symbols of EQL2 (brackets) and their meanings.</a></li>
<li><a href="17-3-terminal-symbols-of-eql2-functions-and-their-meanings-.html#terminal-symbols-of-eql2-functions-and-their-meanings."><span class="toc-section-number">17.3</span> Terminal symbols of EQL2 (functions) and their meanings.</a></li>
<li><a href="17-4-formal-description-of-emu-query-language-version-2.html#formal-description-of-emu-query-language-version-2"><span class="toc-section-number">17.4</span> Formal description of EMU Query Language Version 2</a></li>
<li><a href="17-5-restrictions.html#restrictions"><span class="toc-section-number">17.5</span> Restrictions</a></li>
</ul></li>
<li class="has-sub"><a href="18-app-chap-eql.html#app-chap:eql"><span class="toc-section-number">18</span> EQL: further examples</a><ul>
<li><a href="18-1-simple-equality-inequality-matching-non-matching-queries-single-argument.html#simple-equality-inequality-matching-non-matching-queries-single-argument"><span class="toc-section-number">18.1</span> Simple equality, inequality, matching and non-matching queries (single-argument)</a></li>
<li><a href="18-2-sequence-queries-using-the-sequence-operator.html#sequence-queries-using-the---sequence-operator"><span class="toc-section-number">18.2</span> Sequence queries using the -&gt; sequence operator</a></li>
<li><a href="18-3-subsequent-sequence-queries-using-nesting-of-the-sequence-operator.html#subsequent-sequence-queries-using-nesting-of-the---sequence-operator"><span class="toc-section-number">18.3</span> Subsequent sequence queries using nesting of the <code>-&gt;</code> sequence operator</a></li>
<li><a href="18-4-conjunction-operator.html#conjunction-operator"><span class="toc-section-number">18.4</span> Conjunction operator &amp;</a></li>
<li class="has-sub"><a href="18-5-domination-operator-hierarchical-queries.html#domination-operator-hierarchical-queries"><span class="toc-section-number">18.5</span> Domination operator ^ (hierarchical queries)</a><ul>
<li><a href="18-5-domination-operator-hierarchical-queries.html#simple-domination"><span class="toc-section-number">18.5.1</span> Simple domination</a></li>
<li><a href="18-5-domination-operator-hierarchical-queries.html#multiple-domination"><span class="toc-section-number">18.5.2</span> Multiple domination</a></li>
</ul></li>
<li class="has-sub"><a href="18-6-position.html#position"><span class="toc-section-number">18.6</span> Position</a><ul>
<li><a href="18-6-position.html#simple-usage-of-start-end-and-medial"><span class="toc-section-number">18.6.1</span> Simple usage of <code>Start()</code>, <code>End()</code> and <code>Medial()</code></a></li>
<li><a href="18-6-position.html#position-and-boolean"><span class="toc-section-number">18.6.2</span> Position and boolean &amp;</a></li>
<li><a href="18-6-position.html#position-and-boolean-1"><span class="toc-section-number">18.6.3</span> Position and boolean ^</a></li>
<li><a href="18-6-position.html#count-and-boolean"><span class="toc-section-number">18.6.4</span> Count and boolean <code>&amp;</code></a></li>
<li><a href="18-6-position.html#count-and"><span class="toc-section-number">18.6.5</span> Count and ^</a></li>
</ul></li>
<li class="has-sub"><a href="18-7-combinations.html#combinations"><span class="toc-section-number">18.7</span> Combinations</a><ul>
<li><a href="18-7-combinations.html#and---domination-and-sequence"><span class="toc-section-number">18.7.1</span> ^ and -&gt; (domination and sequence)</a></li>
<li><a href="18-7-combinations.html#and---and-domination-and-sequence-and-boolean"><span class="toc-section-number">18.7.2</span> ^ and -&gt; and &amp; (domination and sequence and boolean &amp;)</a></li>
</ul></li>
<li><a href="18-8-a-few-more-questions-and-answers.html#a-few-more-questions-and-answers"><span class="toc-section-number">18.8</span> A few more questions and answers</a></li>
<li class="has-sub"><a href="18-9-differences-to-the-legacy-emu-query-language.html#differences-to-the-legacy-emu-query-language"><span class="toc-section-number">18.9</span> Differences to the legacy EMU query language</a><ul>
<li><a href="18-9-differences-to-the-legacy-emu-query-language.html#function-call-syntax"><span class="toc-section-number">18.9.1</span> Function call syntax</a></li>
<li><a href="18-9-differences-to-the-legacy-emu-query-language.html#empty-result"><span class="toc-section-number">18.9.2</span> Empty result</a></li>
<li><a href="18-9-differences-to-the-legacy-emu-query-language.html#the-result-modifier-hash-tag"><span class="toc-section-number">18.9.3</span> The result modifier hash tag <code>#</code></a></li>
<li><a href="18-9-differences-to-the-legacy-emu-query-language.html#interpretation-of-the-hash-tag-in-conjunction-operator-queries"><span class="toc-section-number">18.9.4</span> Interpretation of the hash tag <code>#</code> in conjunction operator queries</a></li>
<li><a href="18-9-differences-to-the-legacy-emu-query-language.html#legacy-emu"><span class="toc-section-number">18.9.5</span> legacy EMU</a></li>
</ul></li>
<li class="has-sub"><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#bugs-in-legacy-emu-function-emu.query"><span class="toc-section-number">18.10</span> Bugs in legacy EMU function <code>emu.query()</code></a><ul>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#alternative-labels-in-inequality-queries"><span class="toc-section-number">18.10.1</span> Alternative labels in inequality queries</a></li>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#legacy-emu-1"><span class="toc-section-number">18.10.2</span> legacy EMU</a></li>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#emur-1"><span class="toc-section-number">18.10.3</span> emuR</a></li>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#errors-caused-by-missing-or-superfluous-blanks-or-parentheses"><span class="toc-section-number">18.10.4</span> Errors caused by missing or superfluous blanks or parentheses</a></li>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#order-of-result-segment-list"><span class="toc-section-number">18.10.5</span> Order of result segment list</a></li>
<li><a href="18-10-bugs-in-legacy-emu-function-emu-query.html#additional-features"><span class="toc-section-number">18.10.6</span> Additional features</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="19-app-chap-wrassp.html#app-chap:wrassp"><span class="toc-section-number">19</span> <code>wrassp</code></a><ul>
<li class="has-sub"><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#sec:app-chap-wrassp-praatsSigProc"><span class="toc-section-number">19.1</span> Using Praat’s signal processing routines in the EMU-SDMS</a><ul>
<li><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#to-formant-burg...-to-ssff-files"><span class="toc-section-number">19.1.1</span> <code>To Formant (burg)...</code> to SSFF files</a></li>
<li><a href="19-1-sec-app-chap-wrassp-praatsSigProc.html#to-pitch...-to-ssff-files"><span class="toc-section-number">19.1.2</span> <code>To Pitch...</code> to SSFF files</a></li>
</ul></li>
<li><a href="19-2-sec-app-chap-wrassp-opensmileSigProc.html#sec:app-chap-wrassp-opensmileSigProc"><span class="toc-section-number">19.2</span> Using OpenSMILE signal processing routines in the EMU-SDMS</a></li>
</ul></li>
<li class="part"><span><b>VI Recipes</b></span></li>
<li><a href="20-about.html#about"><span class="toc-section-number">20</span> About</a></li>
<li class="has-sub"><a href="21-recipe-spectralAnalysis.html#recipe:spectralAnalysis"><span class="toc-section-number">21</span> Spectral analysis</a><ul>
<li><a href="21-1-how-to-quantify-differences-between-spectra.html#how-to-quantify-differences-between-spectra"><span class="toc-section-number">21.1</span> How to quantify differences between spectra?</a></li>
<li><a href="21-2-discrete-cosine-transform-dct.html#discrete-cosine-transform-dct"><span class="toc-section-number">21.2</span> Discrete Cosine Transform (DCT)</a></li>
<li class="has-sub"><a href="21-3-dct-coefficients.html#dct-coefficients"><span class="toc-section-number">21.3</span> DCT coefficients</a><ul>
<li><a href="21-3-dct-coefficients.html#p.s.-use-dct-in-order-to-smooth-formant-trajectories"><span class="toc-section-number">21.3.1</span> P.S.: Use DCT in order to smooth formant trajectories</a></li>
</ul></li>
<li><a href="21-4-spectral-moments.html#spectral-moments"><span class="toc-section-number">21.4</span> Spectral moments</a></li>
</ul></li>
<li class="has-sub"><a href="22-recipe-plottingSnippets.html#recipe:plottingSnippets"><span class="toc-section-number">22</span> Plotting snippets</a><ul>
<li><a href="22-1-formant-trajectory-plots-equivalent-to-the-legacy-dplot-normalise-tf-average-tf-.html#formant-trajectory-plots-equivalent-to-the-legacy-dplot...-normalise-tf-average-tf..."><span class="toc-section-number">22.1</span> Formant trajectory plots (equivalent to the legacy <code>dplot(..., normalise = T/F, average = T/F,...)</code>)</a></li>
<li><a href="22-2-f1f2-plots-equivalent-to-the-legacy-eplot-dopoints-tf-doellipse-tf-centroid-tf-.html#f1f2-plots-equivalent-to-the-legacy-eplot...-dopoints-tf-doellipse-tf-centroid-tf-..."><span class="toc-section-number">22.2</span> F1/F2 plots (equivalent to the legacy <code>eplot(..., dopoints = T/F, doellipse = T/F, centroid = T/F, ...)</code>)</a></li>
<li><a href="22-3-f1f2-plot-separated-by-speaker.html#f1f2-plot-separated-by-speaker"><span class="toc-section-number">22.3</span> F1/F2 plot separated by speaker</a></li>
</ul></li>
<li class="has-sub"><a href="23-version-control-of-emudbs-including-collaborative-annotation-with-git-and-gitlab.html#version-control-of-emudbs-including-collaborative-annotation-with-git-and-gitlab"><span class="toc-section-number">23</span> Version control of emuDBs including collaborative annotation with Git and GitLab</a><ul>
<li class="has-sub"><a href="23-1-setup.html#setup"><span class="toc-section-number">23.1</span> Setup</a><ul>
<li><a href="23-1-setup.html#using-gitlab-to-host-the-emudb"><span class="toc-section-number">23.1.1</span> Using GitLab to host the emuDB</a></li>
</ul></li>
<li class="has-sub"><a href="23-2-collaborating-with-others.html#collaborating-with-others"><span class="toc-section-number">23.2</span> Collaborating with others</a><ul>
<li><a href="23-2-collaborating-with-others.html#default-work-flow"><span class="toc-section-number">23.2.1</span> Default work-flow</a></li>
<li><a href="23-2-collaborating-with-others.html#assigning-bundles-to-annotators"><span class="toc-section-number">23.2.2</span> Assigning bundles to annotators</a></li>
<li><a href="23-2-collaborating-with-others.html#pointing-the-emu-webapp-to-the-gitlab-repository"><span class="toc-section-number">23.2.3</span> Pointing the EMU-webApp to the GitLab repository</a></li>
<li><a href="23-2-collaborating-with-others.html#what-about-my-r-scripts-other-files"><span class="toc-section-number">23.2.4</span> What about my R scripts / other files?</a></li>
</ul></li>
</ul></li>
<li><a href="references.html#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="autobuilding" class="section level2">
<h2><span class="header-section-number">3.4</span> Autobuilding</h2>
<p>The simple queries illustrated above query segments from a single level that match a certain label. However, the EMU-SDMS offers a mechanism for performing inter-level queries such as: <em>Query all Phonetic items that contain the label “n” and are part of a content word</em>. For such queries to be possible, the EMU-SDMS offers very sophisticated annotation structure modeling capabilities, which are described in Chapter <a href="4-chap-annot-struct-mod.html#chap:annot-struct-mod">4</a>. For the sake of this tutorial we will focus on converting the flat segment level annotation structure displayed in Figure <a href="3-2-loading-and-inspecting-the-database.html#fig:tutorial-emuWebAppMyFirst">3.2</a> to a hierarchical form as displayed in Figure <a href="3-4-autobuilding.html#fig:tutorial-violentlyHier">3.3</a>, where only the <em>Phonetic</em> level carries time information and the annotation items on the other levels are explicitly linked to each other to form a hierarchical annotation structure.</p>
<div class="figure" style="text-align: center"><span id="fig:tutorial-violentlyHier"></span>
<img src="tutorial_files/figure-html/tutorial-violentlyHier-1.png" alt="Example of a hierarchical annotation of the content (==*C*) word *violently* belonging to the *msajc012* bundle of the *my-first* demo `emuDB`." width="432" />
<p class="caption">
Figure 3.3: Example of a hierarchical annotation of the content (==<em>C</em>) word <em>violently</em> belonging to the <em>msajc012</em> bundle of the <em>my-first</em> demo <code>emuDB</code>.
</p>
</div>
<p>As it is a very laborious task to manually link annotation items together using the <code>EMU-webApp</code> and the hierarchical information is already implicitly contained in the time information of the segments and events of each level, we will now use a function provided by the <code>emuR</code> package to build these hierarchical structures using this information called <code>autobuild_linkFromTimes()</code>. The above R code snippet shows the calls to this function which autobuild the hierarchical annotations in the <em>my-first</em> database. As a general rule for autobuilding hierarchical annotation structures, a good strategy is to start the autobuilding process beginning with coarser grained annotation levels (i.e., the <em>Word</em>/<em>Syllable</em> level pair in our example) and work down to finer grained annotations (i.e., the <em>Syllable</em>/<em>Phoneme</em> and <em>Phoneme</em>/<em>Phonetic</em> level pairs in our example). To build hierachical annotation structures we need link definitions, which together with the level definitions define the annotation structure for the entire database (see Chapter <a href="4-chap-annot-struct-mod.html#chap:annot-struct-mod">4</a> for further details). The <code>autobuild_linkFromTimes()</code> calls in the below R code snippet use the <code>newLinkDefType</code> parameter, which if defined automatically adds a link definition to the database.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="3-4-autobuilding.html#cb16-1"></a><span class="co"># invoke autobuild function</span></span>
<span id="cb16-2"><a href="3-4-autobuilding.html#cb16-2"></a><span class="co"># for &quot;Word&quot; and &quot;Syllable&quot; levels</span></span>
<span id="cb16-3"><a href="3-4-autobuilding.html#cb16-3"></a><span class="kw">autobuild_linkFromTimes</span>(db_handle,</span>
<span id="cb16-4"><a href="3-4-autobuilding.html#cb16-4"></a>                        <span class="dt">superlevelName =</span> <span class="st">&quot;Word&quot;</span>,</span>
<span id="cb16-5"><a href="3-4-autobuilding.html#cb16-5"></a>                        <span class="dt">sublevelName =</span> <span class="st">&quot;Syllable&quot;</span>,</span>
<span id="cb16-6"><a href="3-4-autobuilding.html#cb16-6"></a>                        <span class="dt">convertSuperlevel =</span> <span class="ot">TRUE</span>,</span>
<span id="cb16-7"><a href="3-4-autobuilding.html#cb16-7"></a>                        <span class="dt">newLinkDefType =</span> <span class="st">&quot;ONE_TO_MANY&quot;</span>)</span>
<span id="cb16-8"><a href="3-4-autobuilding.html#cb16-8"></a></span>
<span id="cb16-9"><a href="3-4-autobuilding.html#cb16-9"></a><span class="co"># invoke autobuild function</span></span>
<span id="cb16-10"><a href="3-4-autobuilding.html#cb16-10"></a><span class="co"># for &quot;Syllable&quot; and &quot;Phoneme&quot; levels</span></span>
<span id="cb16-11"><a href="3-4-autobuilding.html#cb16-11"></a><span class="kw">autobuild_linkFromTimes</span>(db_handle,</span>
<span id="cb16-12"><a href="3-4-autobuilding.html#cb16-12"></a>                        <span class="dt">superlevelName =</span> <span class="st">&quot;Syllable&quot;</span>,</span>
<span id="cb16-13"><a href="3-4-autobuilding.html#cb16-13"></a>                        <span class="dt">sublevelName =</span> <span class="st">&quot;Phoneme&quot;</span>,</span>
<span id="cb16-14"><a href="3-4-autobuilding.html#cb16-14"></a>                        <span class="dt">convertSuperlevel =</span> <span class="ot">TRUE</span>,</span>
<span id="cb16-15"><a href="3-4-autobuilding.html#cb16-15"></a>                        <span class="dt">newLinkDefType =</span> <span class="st">&quot;ONE_TO_MANY&quot;</span>)</span>
<span id="cb16-16"><a href="3-4-autobuilding.html#cb16-16"></a></span>
<span id="cb16-17"><a href="3-4-autobuilding.html#cb16-17"></a><span class="co"># invoke autobuild function</span></span>
<span id="cb16-18"><a href="3-4-autobuilding.html#cb16-18"></a><span class="co"># for &quot;Phoneme&quot; and &quot;Phonetic&quot; levels</span></span>
<span id="cb16-19"><a href="3-4-autobuilding.html#cb16-19"></a><span class="kw">autobuild_linkFromTimes</span>(db_handle,</span>
<span id="cb16-20"><a href="3-4-autobuilding.html#cb16-20"></a>                        <span class="dt">superlevelName =</span> <span class="st">&quot;Phoneme&quot;</span>,</span>
<span id="cb16-21"><a href="3-4-autobuilding.html#cb16-21"></a>                        <span class="dt">sublevelName =</span> <span class="st">&quot;Phonetic&quot;</span>,</span>
<span id="cb16-22"><a href="3-4-autobuilding.html#cb16-22"></a>                        <span class="dt">convertSuperlevel =</span> <span class="ot">TRUE</span>,</span>
<span id="cb16-23"><a href="3-4-autobuilding.html#cb16-23"></a>                        <span class="dt">newLinkDefType =</span> <span class="st">&quot;MANY_TO_MANY&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:tutorial-simpleAnnotStruct"></span>
<img src="pics/tut_simpleAnnotStruct.png" alt="Schematic annotation structure of the `emuDB` after calling the autobuild function in R code snippet above." width="50%" />
<p class="caption">
Figure 3.4: Schematic annotation structure of the <code>emuDB</code> after calling the autobuild function in R code snippet above.
</p>
</div>
<p>As the <code>autobuild_linkFromTimes()</code> function automatically creates backup levels to avoid the accidental loss of boundary or event time information, the R code snippet below shows how these backup levels can be removed to clean up the database. However, using the <code>remove_levelDefinition()</code> function with its <code>force</code> parameter set to <code>TRUE</code> is a very invasive action. Usually this would not be recommended, but for this tutorial we are keeping everything as clean as possible.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="3-4-autobuilding.html#cb17-1"></a><span class="co"># list level definitions</span></span>
<span id="cb17-2"><a href="3-4-autobuilding.html#cb17-2"></a><span class="co"># as this reveals the &quot;-autobuildBackup&quot; levels</span></span>
<span id="cb17-3"><a href="3-4-autobuilding.html#cb17-3"></a><span class="co"># added by the autobuild_linkFromTimes() calls</span></span>
<span id="cb17-4"><a href="3-4-autobuilding.html#cb17-4"></a><span class="kw">list_levelDefinitions</span>(db_handle)</span></code></pre></div>
<pre><code>##                       name    type nrOfAttrDefs              attrDefNames
## 1                     Word    ITEM            1                     Word;
## 2                 Syllable    ITEM            1                 Syllable;
## 3                  Phoneme    ITEM            1                  Phoneme;
## 4                 Phonetic SEGMENT            1                 Phonetic;
## 5     Word-autobuildBackup SEGMENT            1     Word-autobuildBackup;
## 6 Syllable-autobuildBackup SEGMENT            1 Syllable-autobuildBackup;
## 7  Phoneme-autobuildBackup SEGMENT            1  Phoneme-autobuildBackup;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="3-4-autobuilding.html#cb19-1"></a><span class="co"># remove the levels containing the &quot;-autobuildBackup&quot;</span></span>
<span id="cb19-2"><a href="3-4-autobuilding.html#cb19-2"></a><span class="co"># suffix</span></span>
<span id="cb19-3"><a href="3-4-autobuilding.html#cb19-3"></a><span class="co"># (verbose = F is only set to avoid additional output in manual)</span></span>
<span id="cb19-4"><a href="3-4-autobuilding.html#cb19-4"></a><span class="kw">remove_levelDefinition</span>(db_handle,</span>
<span id="cb19-5"><a href="3-4-autobuilding.html#cb19-5"></a>                       <span class="dt">name =</span> <span class="st">&quot;Word-autobuildBackup&quot;</span>,</span>
<span id="cb19-6"><a href="3-4-autobuilding.html#cb19-6"></a>                       <span class="dt">force =</span> <span class="ot">TRUE</span>,</span>
<span id="cb19-7"><a href="3-4-autobuilding.html#cb19-7"></a>                       <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</span>
<span id="cb19-8"><a href="3-4-autobuilding.html#cb19-8"></a><span class="co"># (verbose = F is only set to avoid additional output in manual)</span></span>
<span id="cb19-9"><a href="3-4-autobuilding.html#cb19-9"></a><span class="kw">remove_levelDefinition</span>(db_handle,</span>
<span id="cb19-10"><a href="3-4-autobuilding.html#cb19-10"></a>                       <span class="dt">name =</span> <span class="st">&quot;Syllable-autobuildBackup&quot;</span>,</span>
<span id="cb19-11"><a href="3-4-autobuilding.html#cb19-11"></a>                       <span class="dt">force =</span> <span class="ot">TRUE</span>,</span>
<span id="cb19-12"><a href="3-4-autobuilding.html#cb19-12"></a>                       <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</span>
<span id="cb19-13"><a href="3-4-autobuilding.html#cb19-13"></a><span class="co"># (verbose = F is only set to avoid additional output in manual)</span></span>
<span id="cb19-14"><a href="3-4-autobuilding.html#cb19-14"></a><span class="kw">remove_levelDefinition</span>(db_handle,</span>
<span id="cb19-15"><a href="3-4-autobuilding.html#cb19-15"></a>                       <span class="dt">name =</span> <span class="st">&quot;Phoneme-autobuildBackup&quot;</span>,</span>
<span id="cb19-16"><a href="3-4-autobuilding.html#cb19-16"></a>                       <span class="dt">force =</span> <span class="ot">TRUE</span>,</span>
<span id="cb19-17"><a href="3-4-autobuilding.html#cb19-17"></a>                       <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</span>
<span id="cb19-18"><a href="3-4-autobuilding.html#cb19-18"></a></span>
<span id="cb19-19"><a href="3-4-autobuilding.html#cb19-19"></a><span class="co"># list level definitions</span></span>
<span id="cb19-20"><a href="3-4-autobuilding.html#cb19-20"></a><span class="kw">list_levelDefinitions</span>(db_handle)</span></code></pre></div>
<pre><code>##       name    type nrOfAttrDefs attrDefNames
## 1     Word    ITEM            1        Word;
## 2 Syllable    ITEM            1    Syllable;
## 3  Phoneme    ITEM            1     Phoneme;
## 4 Phonetic SEGMENT            1    Phonetic;</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="3-4-autobuilding.html#cb21-1"></a><span class="co"># list level definitions</span></span>
<span id="cb21-2"><a href="3-4-autobuilding.html#cb21-2"></a><span class="co"># which were added by the autobuild functions</span></span>
<span id="cb21-3"><a href="3-4-autobuilding.html#cb21-3"></a><span class="kw">list_linkDefinitions</span>(db_handle)</span></code></pre></div>
<pre><code>##           type superlevelName sublevelName
## 1  ONE_TO_MANY           Word     Syllable
## 2  ONE_TO_MANY       Syllable      Phoneme
## 3 MANY_TO_MANY        Phoneme     Phonetic</code></pre>
<p>As can be seen by the output of <code>list_levelDefinitions()</code> and <code>list_linkDefinitions()</code> in the above R code, the annotation structure of the <em>my-first</em> <code>emuDB</code> now matches that displayed in Figure <a href="3-4-autobuilding.html#fig:tutorial-simpleAnnotStruct">3.4</a>. Using the <code>serve()</code> function to open the <code>emuDB</code> in the <code>EMU-webApp</code> followed by clicking on the <code>show hierarchy</code> button in the top menu (and rotating the hierarchy by 90 degrees by clicking the <code>rotate by 90 degrees</code> button) will result in a view similar to the screenshot of Figure <a href="3-4-autobuilding.html#fig:tutorial-EMU-webAppScreenshotTutorialPostAutobHier">3.5</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:tutorial-EMU-webAppScreenshotTutorialPostAutobHier"></span>
<img src="pics/EMU-webAppScreenshotTutorialPostAutobHier.png" alt="Screenshot of `EMU-webApp` displaying the autobuilt hierarchy of the *my-first* `emuDB`." width="100%" />
<p class="caption">
Figure 3.5: Screenshot of <code>EMU-webApp</code> displaying the autobuilt hierarchy of the <em>my-first</em> <code>emuDB</code>.
</p>
</div>
<div id="querying-the-hierarchical-annotations" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Querying the hierarchical annotations</h3>
<p>Having this hierarchical annotation structure now allows us to formulate a query that helps answer the originally stated question: <em>Given an annotated speech database, is the vowel height of the vowel @ (measured by its correlate, the first formant frequency) influenced by whether it appears in a content or function word?</em>. The R code snippet below shows how all the <em>@</em> vowels in the <em>my-first</em> database are queried.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="3-4-autobuilding.html#cb23-1"></a><span class="co"># query annotation items containing</span></span>
<span id="cb23-2"><a href="3-4-autobuilding.html#cb23-2"></a><span class="co"># the labels @ on the Phonetic level</span></span>
<span id="cb23-3"><a href="3-4-autobuilding.html#cb23-3"></a>sl_vowels =<span class="st"> </span><span class="kw">query</span>(db_handle, <span class="st">&quot;Phonetic == @&quot;</span>)</span>
<span id="cb23-4"><a href="3-4-autobuilding.html#cb23-4"></a></span>
<span id="cb23-5"><a href="3-4-autobuilding.html#cb23-5"></a><span class="co"># show sl_vowels</span></span>
<span id="cb23-6"><a href="3-4-autobuilding.html#cb23-6"></a>sl_vowels</span></code></pre></div>
<pre><code>## # A tibble: 28 x 16
##    labels start   end db_uuid session bundle start_item_id end_item_id level
##    &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;          &lt;int&gt;       &lt;int&gt; &lt;chr&gt;
##  1 @      1506. 1548. 3f9435~ 0000    msajc~           103         103 Phon~
##  2 @      1715. 1741. 3f9435~ 0000    msajc~           107         107 Phon~
##  3 @      1967. 2034. 3f9435~ 0000    msajc~           112         112 Phon~
##  4 @      2303. 2362. 3f9435~ 0000    msajc~           117         117 Phon~
##  5 @      2447. 2506. 3f9435~ 0000    msajc~           119         119 Phon~
##  6 @      1917. 1958. 3f9435~ 0000    msajc~           118         118 Phon~
##  7 @      2022. 2078. 3f9435~ 0000    msajc~           120         120 Phon~
##  8 @      2382. 2431. 3f9435~ 0000    msajc~           126         126 Phon~
##  9 @       330.  380. 3f9435~ 0000    msajc~            91          91 Phon~
## 10 @      1472. 1490. 3f9435~ 0000    msajc~           108         108 Phon~
## # ... with 18 more rows, and 7 more variables: attribute &lt;chr&gt;,
## #   start_item_seq_idx &lt;int&gt;, end_item_seq_idx &lt;int&gt;, type &lt;chr&gt;,
## #   sample_start &lt;int&gt;, sample_end &lt;int&gt;, sample_rate &lt;int&gt;</code></pre>
<p>As the type of word (content vs. function) for each <em>@</em> vowel is also needed, we can use the requery functionality of the EMU-SDMS (see Chapter <a href="6-chap-querysys.html#chap:querysys">6</a>) to retrieve the word type for each <em>@</em> vowel. A requery essentially moves through a hierarchical annotation (vertically or horizontally) starting from the segments that are passed into the requery function. The R code below illustrates the usage of the hierarchical requery function, <code>requery_hier()</code>, to retrieve the appropriate annotation items from the <em>Word</em> level.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="3-4-autobuilding.html#cb25-1"></a><span class="co"># hierarchical requery starting from the items in sl_vowels</span></span>
<span id="cb25-2"><a href="3-4-autobuilding.html#cb25-2"></a><span class="co"># and moving up to the &quot;Word&quot; level</span></span>
<span id="cb25-3"><a href="3-4-autobuilding.html#cb25-3"></a>sl_word_type =<span class="st"> </span><span class="kw">requery_hier</span>(db_handle,</span>
<span id="cb25-4"><a href="3-4-autobuilding.html#cb25-4"></a>                           <span class="dt">seglist =</span> sl_vowels,</span>
<span id="cb25-5"><a href="3-4-autobuilding.html#cb25-5"></a>                           <span class="dt">level =</span> <span class="st">&quot;Word&quot;</span>,</span>
<span id="cb25-6"><a href="3-4-autobuilding.html#cb25-6"></a>                           <span class="dt">calcTimes =</span> <span class="ot">FALSE</span>)</span>
<span id="cb25-7"><a href="3-4-autobuilding.html#cb25-7"></a></span>
<span id="cb25-8"><a href="3-4-autobuilding.html#cb25-8"></a><span class="co"># show sl_word_type</span></span>
<span id="cb25-9"><a href="3-4-autobuilding.html#cb25-9"></a>sl_word_type</span></code></pre></div>
<pre><code>## # A tibble: 28 x 16
##    labels start   end db_uuid session bundle start_item_id end_item_id level
##    &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;          &lt;int&gt;       &lt;int&gt; &lt;chr&gt;
##  1 F         NA    NA 3f9435~ 0000    msajc~            16          16 Word 
##  2 C         NA    NA 3f9435~ 0000    msajc~            17          17 Word 
##  3 C         NA    NA 3f9435~ 0000    msajc~            17          17 Word 
##  4 C         NA    NA 3f9435~ 0000    msajc~            18          18 Word 
##  5 C         NA    NA 3f9435~ 0000    msajc~            18          18 Word 
##  6 C         NA    NA 3f9435~ 0000    msajc~            19          19 Word 
##  7 C         NA    NA 3f9435~ 0000    msajc~            20          20 Word 
##  8 C         NA    NA 3f9435~ 0000    msajc~            20          20 Word 
##  9 F         NA    NA 3f9435~ 0000    msajc~            13          13 Word 
## 10 F         NA    NA 3f9435~ 0000    msajc~            17          17 Word 
## # ... with 18 more rows, and 7 more variables: attribute &lt;chr&gt;,
## #   start_item_seq_idx &lt;int&gt;, end_item_seq_idx &lt;int&gt;, type &lt;chr&gt;,
## #   sample_start &lt;int&gt;, sample_end &lt;int&gt;, sample_rate &lt;int&gt;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="3-4-autobuilding.html#cb27-1"></a><span class="co"># show that sl_vowel and sl_word_type have the</span></span>
<span id="cb27-2"><a href="3-4-autobuilding.html#cb27-2"></a><span class="co"># same number of row entries</span></span>
<span id="cb27-3"><a href="3-4-autobuilding.html#cb27-3"></a><span class="kw">nrow</span>(sl_vowels) <span class="op">==</span><span class="st"> </span><span class="kw">nrow</span>(sl_word_type)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>As can be seen by the <code>nrow()</code> comparison in the above R code, the segment list returned by the <code>requery_hier()</code> function has the same number of rows as the original <code>sl_vowels</code> segment list. This is important, as each row of both segment lists line up and allow us to infer which segment belongs to which word type (e.g., vowel <code>sl_vowels[5,]</code> belongs to the word type <code>sl_word_type[5,]</code>).</p>
</div>
</div>
<p style="text-align: center;">
<a href="3-3-querying-and-autobuilding-the-annotation-structure.html"><button class="btn btn-default">Previous</button></a>
<a href="3-5-section-tutorial-sigExtrAndExpl.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
